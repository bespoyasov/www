---
title: –†–∏—Å—É–µ–º –¥–µ—Ä–µ–≤—å—è, —á–∞—Å—Ç—å 3. –û—Ç –¥–µ—Ä–µ–≤–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞ –∫ –Ω–∞—Å—Ç–æ—è—â–µ–º—É
description: –ü–∏—à–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–µ—Ä–µ–≤—å–µ–≤ —Å –ø–æ–º–æ—â—å—é TypeScript –ø–æ –≤—Å–µ–º –ø—Ä–∞–≤–∏–ª–∞–º –û–û–ü –∏ –∑–∞–≤–µ—Ç–∞–º ¬´–ß–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã¬ª –ú–∞—Ä—Ç–∏–Ω–∞
datetime: 2021-04-10T12:10
slug: /blog/generating-trees-on-canvas-using-typescript-and-oop-3
cover: /images/content/generating-trees-on-canvas-using-typescript-and-oop-3/architecture-with-layers.png
tags:
  - dev
  - oop
  - solid
  - ts
---

# –†–∏—Å—É–µ–º –¥–µ—Ä–µ–≤—å—è, —á–∞—Å—Ç—å 3. –û—Ç –¥–µ—Ä–µ–≤–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞ –∫ –Ω–∞—Å—Ç–æ—è—â–µ–º—É

–ó–∞–∫–∞–Ω—á–∏–≤–∞–µ–º –ø–∏—Å–∞—Ç—å —Ä–∏—Å–æ–≤–∞–ª–∫—É –¥–µ—Ä–µ–≤—å–µ–≤ –ø–æ –∫–∞–Ω–æ–Ω–∞–º –û–û–ü –∏ —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

–í [–ø–µ—Ä–≤–æ–π —á–∞—Å—Ç–∏](/blog/generating-trees-on-canvas-using-typescript-and-oop) –º—ã —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –í –∫–æ–Ω—Ü–µ –Ω–∞–ø–∏—Å–∞–ª–∏ –∫–æ–¥ –º–æ–¥—É–ª—è L-—Å–∏—Å—Ç–µ–º, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.

–í–æ [–≤—Ç–æ—Ä–æ–π —á–∞—Å—Ç–∏](/blog/generating-trees-on-canvas-using-typescript-and-oop-2) –º—ã —Å–æ–∑–¥–∞–ª–∏ –º–æ–¥—É–ª—å –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø–æ–ª–æ–∂–µ–Ω–∏—è —Ç–æ—á–µ–∫ –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏, –¥–æ–±–∞–≤–∏–ª–∏ –º–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DOM –∏ `canvas`. –ê –≤ –∫–æ–Ω—Ü–µ –≤—ã–≤–µ–ª–∏ –Ω–∞ —ç–∫—Ä–∞–Ω –ø–µ—Ä–≤—ã–π –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π —Ä–∏—Å—É–Ω–æ–∫.

–í —ç—Ç–æ–º –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–º –ø–æ—Å—Ç–µ –Ω–∞–ø–∏—à–µ–º ¬´–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫¬ª —Å —è–∑—ã–∫–∞ L-—Å–∏—Å—Ç–µ–º –Ω–∞ —è–∑—ã–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –Ω–∞ `canvas`. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–µ—Ä–µ–≤–æ –ü–∏—Ñ–∞–≥–æ—Ä–∞, –¥–æ–±–∞–≤–∏–º –µ–º—É —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –∏ —Ü–≤–µ—Ç–∞, —á—Ç–æ–±—ã –æ–Ω–æ —Å—Ç–∞–ª–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–µ–µ –¥–µ—Ä–µ–≤–æ.

## –ü–∏—à–µ–º –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä

–ó–∞–¥–∞—á–∞ —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–∏–º–≤–æ–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ L-—Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –µ–≥–æ –≤ –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–∏—Å–æ–≤–∞–ª–∫–∏. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º API –º–æ–¥—É–ª—è –∏ –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

![–ü—É–±–ª–∏—á–Ω–æ–µ API –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥—É–ª—è](/img/blog/treees-interpreter.png)

–û–Ω –±—É–¥–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –º–æ–¥—É–ª—è –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `SystemInterpreter`. –û–±—ä—è–≤–∏–º API:

```ts
// src/interpreter/types.ts

export interface SystemInterpreter {
  translate(expression: Expression): List<Line>;
}
```

...–ò –Ω–∞—á–Ω—ë–º –ø–∏—Å–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é:

```ts
// src/interpreter/implementation.ts

import { AppSettings } from "../settings";
import { StartSelector } from "../geometry/location";
import { ShapeBuilder } from "../geometry/shape";
import { Stack } from "./stack/types";
import { SystemInterpreter } from "./types";

export class SystemToGeometryMapper implements SystemInterpreter {
  // –≠—Ç–∏ –ø–æ–ª—è –±—É–¥–µ–º –º–µ–Ω—è—Ç—å –ø–æ —Ö–æ–¥—É –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥:
  private currentLocation: Point = { x: 0, y: 0 };
  private currentAngle: DegreesAmount = 0;

  // –í —ç—Ç–∏—Ö –ø–æ–ª—è—Ö –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–∏–º–≤–æ–ª–æ–≤
  // –∏ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ —ç—Ç–∏–º —Å–∏–º–≤–æ–ª–∞–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç:
  private systemTokens: List<Character> = [];
  private drawInstructions: List<Line> = [];

  // –û–±—ä—è–≤–ª—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
  constructor(
    private shapeBuilder: ShapeBuilder,
    private startSelector: StartSelector,
    private stack: Stack<TreeJoint>,
    private settings: AppSettings,
  ) {}

  // –†–µ–∞–ª–∏–∑—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥:
  public translate(expression: Expression): List<Line> {
    this.currentLocation = { ...this.startSelector.selectStart() };
    this.systemTokens = expression.split("");
    this.systemTokens.forEach(this.translateToken);
    return this.drawInstructions;
  }

  // ‚Ä¶
}
```

–í –º–µ—Ç–æ–¥–µ `translate` –º—ã –ø—Ä–∏–Ω–∏–º–∞–µ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏ —Ä–∞–∑–±–∏–≤–∞–µ–º –µ–≥–æ –Ω–∞ —Å–∏–º–≤–æ–ª—ã. –ö–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –º–µ—Ç–æ–¥–æ–º `translateToken`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø–∏—à–µ–º –ø–æ–∑–∂–µ. –ö–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∞—Å—Å–∏–≤ `drawInstructions`, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω–∏–º –≤—Å–µ —É–∂–µ –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.

–í—ã –º–æ–≥–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö —Å—Ä–µ–¥–∏ –ø—Ä–æ—á–∏—Ö –µ—Å—Ç—å `Stack<TreeJoint>`. –Ø –Ω–µ —Å—Ç–∞–ª —É–∫–∞–∑—ã–≤–∞—Ç—å –µ–≥–æ –≤ —Å–ø–∏—Å–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –ø–æ —Å—É—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö ‚Äî –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–π –∫–æ–¥, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –æ—Å–æ–±–æ –Ω–µ –Ω–µ—Å—ë—Ç.

–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–∫–æ–º—ã —Å —Ç–µ–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–µ–∫, —Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–æ—á–µ—Å—Ç—å [—Å—Ç–∞—Ç—å—é –æ –Ω—ë–º](https://ru.wikipedia.org/wiki/–°—Ç–µ–∫) –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –µ–≥–æ [—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö](https://github.com/bespoyasov/treees/blob/main/src/interpreter/stack/implementation.ts).

–í–µ—Ä–Ω—ë–º—Å—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–∞–ø–∏—à–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `translateToken`:

```ts
// src/interpreter/implementation.ts

export class SystemToGeometryMapper implements SystemInterpreter {
  // ‚Ä¶

  private translateToken = (token: Character): void => {
    switch (token) {
      // –ï—Å–ª–∏ –º—ã –≤—Å—Ç—Ä–µ—á–∞–µ–º —Å—Ä–µ–¥–∏ —Å–∏–º–≤–æ–ª–æ–≤ 0 –∏–ª–∏ 1,
      // —Ä–∏—Å—É–µ–º –ª–∏–Ω–∏—é –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏
      // –∏ —Ç–µ–∫—É—â–∏–º —É–≥–ª–æ–º:
      case "0":
      case "1": {
        const line = this.shapeBuilder.createLine(
          this.currentLocation,
          this.settings.stemLength,
          this.currentAngle,
        );

        this.drawInstructions.push(line);
        this.currentLocation = { ...line.end };
        break;
      }

      // –ü—Ä–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–µ –º—ã ¬´–ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –≤–ª–µ–≤–æ¬ª
      // –∏ –∫–ª–∞–¥—ë–º —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ —É–≥–æ–ª –≤ —Å—Ç–µ–∫:
      case "[": {
        this.currentAngle -= this.settings.jointAngle;
        this.stack.push({
          location: { ...this.currentLocation },
          rotation: this.currentAngle,
          stemWidth: this.settings.stemLength,
        });

        break;
      }

      // –ü—Ä–∏ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–µ –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
      // –∏–∑ —Å—Ç–µ–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –∫–∞–∫ —Ç–µ–∫—É—â–∏–µ,
      // –∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∏–º –Ω–∞–ø—Ä–∞–≤–æ:
      case "]": {
        const lastJoint = this.stack.pop();
        this.currentLocation = { ...lastJoint.location };
        this.currentAngle = lastJoint.rotation + 2 * this.settings.jointAngle;
        break;
      }
    }
  };
}
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –Ω–∞ –∫–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω –º—ã –±—É–¥–µ–º –ª–∏–±–æ —Ä–∏—Å–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –ª–∏–Ω–∏—é, –ª–∏–±–æ —Ä–µ—à–∞—Ç—å, –≤ –∫–∞–∫—É—é —Å—Ç–æ—Ä–æ–Ω—É –∏ –∏–∑ –∫–∞–∫–æ–≥–æ –º–µ—Å—Ç–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç—å. –°—Ç–µ–∫ –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –º–µ—Å—Ç–æ, –≥–¥–µ –≤–µ—Ç–∫–∞ —Ä–∞–∑–¥–≤–∞–∏–≤–∞–µ—Ç—Å—è.

–î–∞–≤–∞–π—Ç–µ –ø–æ–ø—Ä–æ–±—É–µ–º –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è:

```ts
// src/settings/index.ts

export const settings: AppSettings = {
  canvasSize: {
    width: 800,
    height: 600,
  },

  // –ò—Å–ø–æ–ª—å–∑—É–µ–º 5 –∏—Ç–µ—Ä–∞—Ü–∏–π,
  // –ø—Ä–∞–≤–∏–ª–∞ ‚Äî —Ç–µ –∂–µ, –¥–ª—è –¥–µ—Ä–µ–≤–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞:
  iterations: 5,
  initiator: "0",
  rules: {
    "1": "11",
    "0": "1[0]0",
  },

  // –î–ª–∏–Ω–∞ —Å–µ–∫—Ü–∏–∏ —Å—Ç–≤–æ–ª–∞ 10 –ø–∏–∫—Å–µ–ª–µ–π,
  // –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –≤—Å–µ–≥–¥–∞ –Ω–∞ 45 –≥—Ä–∞–¥—É—Å–æ–≤.
  stemLength: 10,
  jointAngle: 45,
};
```

–ü—Ä–∞–≤–∏–º –≤—Ö–æ–¥–Ω—É—é —Ç–æ—á–∫—É:

```ts
// src/index.ts

const builder = container.get<SystemBuilder>();
const drawer = container.get<Drawer>();
const interpreter = container.get<SystemInterpreter>();
const settings = container.get<AppSettings>();

const system = builder.build(settings);
const lines = interpreter.translate(system);
lines.forEach((line) => drawer.drawLine(line));
```

–ü—Ä–∏ —Ç–∞–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –º—ã –ø–æ–ª—É—á–∏–º –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –¥–µ—Ä–µ–≤–æ –ü–∏—Ñ–∞–≥–æ—Ä–∞, –∫—Ä–∞–π–Ω–∏–µ –æ—Ç—Ä–µ–∑–∫–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ ‚Äî —ç—Ç–æ –ª–∏—Å—Ç—å—è.

![–ü—è—Ç–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –¥–µ—Ä–µ–≤–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞; –Ω–∞ –æ—á–µ—Ä–µ–¥–Ω–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –∏–∑ –∫–∞–∂–¥–æ–π –≤–µ—Ç–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ 2 –Ω–æ–≤—ã—Ö](/img/blog/treees-pythagoras-tree.png)

–ú–æ–∂–Ω–æ –ø–æ–∏–≥—Ä–∞—Ç—å—Å—è —Å —É–≥–ª–æ–º –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–µ —Ñ–∏–≥—É—Ä—ã –º–æ–∂–Ω–æ —Å–æ—Ç–≤–æ—Ä–∏—Ç—å üòÉ

![–£–≥–æ–ª –≤ 90 –≥—Ä–∞–¥—É—Å–æ–≤ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ä–µ–≤–æ –≤ ¬´–∞–Ω—Ç–µ–Ω–Ω—É¬ª](/img/blog/treees-90.png)
![–£–≥–æ–ª –≤ 15 –≥—Ä–∞–¥—É—Å–æ–≤ ‚Äî –≤ ¬´–∫–æ–ª–æ—Å–æ–∫¬ª](/img/blog/treees-15.png)
![–£–≥–æ–ª –≤ 115 –≥—Ä–∞–¥—É—Å–æ–≤ ‚Äî –≤... —ç–º–º...](/img/blog/treees-115.png)

–û—Ç–ª–∏—á–Ω–æ, –æ—Å–Ω–æ–≤–∞ –¥–µ—Ä–µ–≤–∞ –µ—Å—Ç—å! –ù–æ –ø—Ä–µ–∂–¥–µ, —á–µ–º –º—ã —Å–¥–µ–ª–∞–µ–º –¥–µ—Ä–µ–≤—å—è –ø–æ—Ö–æ–∂–∏–º–∏ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–µ, –Ω–∞–º —Å—Ç–æ–∏—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤ –ø–æ—Ä—è–¥–æ–∫ –≤—Ö–æ–¥–Ω—É—é —Ç–æ—á–∫—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

## –ü—Ä–∏–≤–æ–¥–∏–º –≤ –ø–æ—Ä—è–¥–æ–∫ –≤—Ö–æ–¥–Ω—É—é —Ç–æ—á–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–°–µ–π—á–∞—Å –∫–æ–¥ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã–≥–ª—è–¥–∏—Ç –ø–ª–æ—Ö–æ:

```ts
// src/index.ts

const builder = container.get<SystemBuilder>();
const drawer = container.get<Drawer>();
const interpreter = container.get<SystemInterpreter>();
const settings = container.get<AppSettings>();

const system = builder.build(settings);
const lines = interpreter.translate(system);
lines.forEach((line) => drawer.drawLine(line));
```

–ú—ã –ø–æ–ª—É—á–∞–µ–º –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–æ–≤, –≤—ã–∑—ã–≤–∞–µ–º –≤—Å—ë —Ä—É–∫–∞–º–∏, —ç—Ç–æ –Ω–µ–∫—Ä—É—Ç–æ. –î–∞–≤–∞–π—Ç–µ —Å–ø—Ä—è—á–µ–º –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –∑–∞ —Å—Ç–∞—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°–æ–∑–¥–∞–¥–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Application`:

```ts
// src/app/types.ts

export interface Application {
  start(): void;
}
```

...–°–ø—Ä—è—á–µ–º –≤–µ—Å—å –∫–æ–¥ –∑–∞ –º–µ—Ç–æ–¥–æ–º `start`:

```ts
// src/app/implementation.ts

export class App implements Application {
  constructor(
    private builder: SystemBuilder,
    private drawer: Drawer,
    private interpreter: SystemInterpreter,
    private settings: AppSettings,
  ) {}

  start(): void {
    const system = this.builder.build(this.settings);
    const lines = this.interpreter.translate(system);
    lines.forEach((line) => this.drawer.drawLine(line));
  }
}
```

...–ò –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –µ–≥–æ:

```ts
// src/app/composition.ts

import { container } from "../composition";
import { App } from "./implementation";
import { Application } from "./types";

container.registerSingleton<Application, App>();
```

...–ê –≤—ã–∑—ã–≤–∞—Ç—å –±—É–¥–µ–º —Ç–∞–∫:

```ts
// src/index.ts

import { container } from "./composition";
import { Application } from "./app/types";

const app = container.get<Application>();
app.start();
```

–í–æ—Ç, —Ç–µ–ø–µ—Ä—å –≥–æ—Ä–∞–∑–¥–æ —á–∏—â–µ.

## –î–µ–ª–∞–µ–º –¥–µ—Ä–µ–≤—å—è –±–æ–ª–µ–µ —Ä–µ–∞–ª—å–Ω—ã–º–∏

–ù–∞–ø–æ–º–Ω—é, —á—Ç–æ –∏–¥–µ—é —Ç–æ–≥–æ, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–µ—Ä–µ–≤—å—è –±–æ–ª–µ–µ —Ä–µ–∞–ª—å–Ω—ã–º–∏, —è –ø–æ–∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–ª [–∏–∑ —Ç–æ–≥–æ —Å–∞–º–æ–≥–æ –≤–∏–¥–µ–æ](https://www.youtube.com/watch?v=mAz46Z5curo) –æ–± L-—Å–∏—Å—Ç–µ–º–∞—Ö, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å—Ö–æ–¥–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å.

–°–µ–π—á–∞—Å –Ω–∞—à–∏ –¥–µ—Ä–µ–≤—å—è —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ –∏ ¬´–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ¬ª. –ß—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ –±–æ–ª—å—à–µ –ø–æ—Ö–æ–∂–∏ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–µ, –Ω–∞–¥–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –∏ –¥–∏–Ω–∞–º–∏–∫–∏, –∞ –∏–º–µ–Ω–Ω–æ:

- –¢–æ–ª—â–∏–Ω–∞ —Å—Ç–≤–æ–ª–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º —É–º–µ–Ω—å—à–∞—Ç—å—Å—è;
- –£–≥–æ–ª –¥–æ–ª–∂–µ–Ω –º–µ–Ω—è—Ç—å—Å—è –Ω–∞ —Å–ª—É—á–∞–π–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–∞–∫–æ–º-—Ç–æ –¥–∏–∞–ø–∞–∑–æ–Ω–µ;
- –í–µ—Ç–≤–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –∏–∑ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–ª—É—á–∞–π–Ω—ã—Ö –º–µ—Å—Ç —Å—Ç–≤–æ–ª–∞;
- –õ–∏—Å—Ç—å—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–µ–ª—ë–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ üòÉ

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —Å–ª–µ–≥–∫–∞ –ø–æ–º–µ–Ω—è–µ–º –ø—Ä–∞–≤–∏–ª–∞ L-—Å–∏—Å—Ç–µ–º—ã. –î–æ–±–∞–≤–∏–º –Ω–æ–≤—É—é –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É `"2"`, –æ–Ω–∞ –ø–æ–∑–≤–æ–ª–∏—Ç –¥–µ—Ä–µ–≤—É –Ω–µ —É–º–µ–Ω—å—à–∞—Ç—å –¥–ª–∏–Ω—É –≤–µ—Ç–æ–∫ —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ. –°–µ–π—á–∞—Å –Ω–∞ –∫–∞–∂–¥—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é –¥–ª–∏–Ω–∞ —Å–æ–∫—Ä–∞—â–∞–µ—Ç—Å—è –≤ –¥–≤–∞ —Ä–∞–∑–∞, –Ω–æ–≤—ã–π —Å–∏–º–≤–æ–ª –∑–∞–º–µ–¥–ª–∏—Ç —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å.

–ê–∫—Å–∏–æ–º—É —Å–¥–µ–ª–∞–µ–º –ø–æ–¥–ª–∏–Ω–Ω–µ–µ, —á—Ç–æ–±—ã —Å—Ç–≤–æ–ª –±—ã–ª –±–æ–ª—å—à–µ –ø–æ—Ö–æ–∂ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π. –ê —Ç–∞–∫–∂–µ —É–≤–µ–ª–∏—á–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –¥–æ 12, —á—Ç–æ–±—ã –¥–µ—Ä–µ–≤–æ –±—ã–ª–æ –≥—É—Å—Ç—ã–º.

–û–±–æ–∑–Ω–∞—á–∏–º —Ç–∞–∫–∂–µ –Ω–∞—á–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É —Å—Ç–≤–æ–ª–∞ –∏ —à–∏—Ä–∏–Ω—É –ª–∏—Å—Ç—å–µ–≤, –∫ –Ω–∏–º –º—ã –≤–µ—Ä–Ω—ë–º—Å—è –ø–æ–∑–∂–µ.

```ts
// src/settings/index.ts

export const settings: AppSettings = {
  // ‚Ä¶

  iterations: 12,
  initiator: "22220",
  rules: {
    "1": "21",
    "0": "1[20]20",
  },

  leafWidth: 4,
  stemWidth: 16,

  // ‚Ä¶
};
```

–¢–µ–ø–µ—Ä—å –∏–∑–º–µ–Ω–∏–º –∫–æ–¥ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞.

```ts
export class SystemToGeometryMapper implements SystemInterpreter {
  private currentLocation: Point = { x: 0, y: 0 };
  private currentAngle: DegreesAmount = 0;

  // –ë—É–¥–µ–º –º–µ–Ω—è—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ —É–≥–æ–ª, –Ω–æ –∏ —à–∏—Ä–∏–Ω—É —Å—Ç–≤–æ–ª–∞:
  private currentWidth: PixelsAmount = 0;

  private systemTokens: List<Character> = [];
  private drawInstructions: List<Instruction> = [];

  constructor(
    private shapeBuilder: ShapeBuilder,
    private startSelector: StartSelector,
    private stack: Stack<TreeJoint>,
    private settings: AppSettings,

    // –ù–∞–º –∑–¥–µ—Å—å –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫ —Ä–∞–Ω–¥–æ–º–∞,
    // —ç—Ç–æ –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ Math.random —Å –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–º API,
    // –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Å–ª—É—á–∞–π–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.
    // –ö–æ–¥ —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –Ω–∞–π—Ç–∏ –Ω–∞ –ì–∏—Ç—Ö–∞–±–µ.
    private random: RandomSource,
  ) {}

  // ‚Ä¶
}
```

–î–∞–ª—å—à–µ –ø—Ä–∞–≤–∏–º –ø–µ—Ä–µ–≤–æ–¥ —Å–∏–º–≤–æ–ª–æ–≤, –µ—Å–ª–∏ –º—ã –≤—Å—Ç—Ä–µ—á–∞–µ–º –ª–∏—Å—Ç, –∫—Ä–∞—Å–∏–º –µ–≥–æ –≤ —Å–ª—É—á–∞–π–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∑–µ–ª—ë–Ω—ã–π —Ü–≤–µ—Ç:

```
private translateToken = (token: Character): void => {
  switch (token) {
    case "0": {
      const line = this.createLine();

      this.currentLocation = { ...line.end };
      this.drawInstructions.push({
        line,
        color: this.selectLeafColor(),  // –î–æ–±–∞–≤–ª—è–µ–º –∑–µ–ª—ë–Ω—ã–π —Ü–≤–µ—Ç
        width: this.settings.leafWidth, // –∏ —à–∏—Ä–∏–Ω—É –ª–∏—Å—Ç–∞.
      });

      break;
    }

    // ‚Ä¶
  }
}
```

–í–µ—Ç–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –∏–∑ —Å—Ç–≤–æ–ª–∞, —Å –Ω–µ–∫–æ—Ç–æ—Ä–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –ø—Ä–æ–ø—É—Å–∫–∞–µ–º, —ç—Ç–æ –ø—Ä–∏–¥–∞—Å—Ç —Ö–∞–æ—Ç–∏—á–Ω–æ—Å—Ç–∏ –∏—Ö —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—é:

```
private translateToken = (token: Character): void => {
  switch (token) {
    // ‚Ä¶

    case "1":
    case "2": {
      // –†–∏—Å—É–µ–º –≤–µ—Ç–∫–∏ —Ç–æ–ª—å–∫–æ –≤ 60% —Å–ª—É—á–∞–µ–≤:
      if (this.shouldSkip()) return;

      const line = this.createLine();
      this.drawInstructions.push({ line, width: this.currentWidth });
      this.currentLocation = { ...line.end };

      break;
    }

    // ‚Ä¶
  }
};
```

–ü—Ä–∏ –ø–æ–≤–æ—Ä–æ—Ç–µ —Ç–∞–∫–∂–µ —É–º–µ–Ω—å—à–∞–µ–º —à–∏—Ä–∏–Ω—É –≤–µ—Ç–æ–∫ –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤ —É–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞:

```
private translateToken = (token: Character): void => {
  switch (token) {
    // ‚Ä¶

    case "[": {
      // –£–º–µ–Ω—å—à–∞–µ–º —à–∏—Ä–∏–Ω—É –≤–µ—Ç–∫–∏:
      this.currentWidth *= 0.75;

      // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç –ø–æ–≤–æ—Ä–æ—Ç–∞:
      this.currentAngle -=
        this.settings.jointAngle + this.randomAngleDeviation();

      // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –º–µ—Å—Ç–æ —Ä–∞–∑–≤–µ—Ç–≤–ª–µ–Ω–∏—è, —à–∏—Ä–∏–Ω—É –∏ —É–≥–æ–ª,
      // —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å—é–¥–∞ –∏ –ø–æ–≤–µ—Ä–Ω—É—Ç—å –≤ –¥—Ä—É–≥—É—é —Å—Ç–æ—Ä–æ–Ω—É:
      this.stack.push({
        location: { ...this.currentLocation },
        rotation: this.currentAngle,
        stemWidth: this.currentWidth,
      });

      break;
    }

    case "]": {
      // –ü–æ–ª—É—á–∞–µ–º –º–µ—Å—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–≤–µ—Ç–≤–ª–µ–Ω–∏—è:
      const lastJoint = this.stack.pop();

      // –ò—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏–µ, —É–≥–æ–ª –∏ —à–∏—Ä–∏–Ω—É,
      // —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é –≤–µ—Ç–∫—É:
      this.currentWidth = lastJoint.stemWidth;
      this.currentLocation = { ...lastJoint.location };
      this.currentAngle =
        lastJoint.rotation +
        2 * this.settings.jointAngle +
        this.randomAngleDeviation();

      break;
    }
  }
};
```

–î–æ–±–∞–≤–∏–º —Ç–∞–∫–∂–µ –≤—Å–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:

```ts
export class SystemToGeometryMapper implements SystemInterpreter {
  // ‚Ä¶

  private createLine = (): Line => {
    return this.shapeBuilder.createLine(
      this.currentLocation,
      this.settings.stemLength,
      this.currentAngle,
    );
  };

  // –í 40% —Å–ª—É—á–∞–µ–≤ –Ω–µ —Ä–∏—Å—É–µ–º –≤–µ—Ç–∫–∏:
  private shouldSkip = (): boolean => {
    return this.random.getValue() > 0.4;
  };

  // –°–ª—É—á–∞–π–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —É–≥–ª–∞ –±—É–¥–µ—Ç –∫–æ–ª–µ–±–∞—Ç—å—Å—è
  // –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ—Ç -5 –¥–æ 5 –≥—Ä–∞–¥—É—Å–æ–≤:
  private randomAngleDeviation = (): Angle => {
    return this.random.getBetweenInclusive(-5, 5);
  };

  // –°–ª—É—á–∞–π–Ω–æ –≤—ã–±–∏—Ä–∞–µ–º —Å—Ä–µ–¥–∏ 3 –∑–µ–ª—ë–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤:
  private selectLeafColor = (): Color => {
    const randomColor = this.random.getBetweenInclusive(0, 2);
    return leafColors[randomColor];
  };
}
```

‚Ä¶–ê —Ç–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–µ–º –Ω–∞–∫–æ–Ω–µ—Ü –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

![–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞](/img/blog/treees-result.png)

–ü–æ–ª—É—á–∏–ª–æ—Å—å –Ω–∞—Å—Ç–æ—è—â–µ–µ –¥–µ—Ä–µ–≤–æ! üå≥

### –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω—ã

–ß—Ç–æ –≤–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è _–æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã_ –º–æ–¥—É–ª–µ–º `Interpreter`. –•–æ—Ç—è —Ä–∏—Å—É–Ω–æ–∫ –∏ –∏–∑–º–µ–Ω–∏–ª—Å—è —Å–∏–ª—å–Ω–æ, –º—ã –∏–∑–º–µ–Ω–∏–ª–∏ —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞. –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –ø—Ä–µ–∂–Ω–∏–º–∏.

–ë–æ–ª–µ–µ —Ç–æ–≥–æ, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ç–æ–∂–µ –æ—Å—Ç–∞–ª–∏—Å—å –ø—Ä–µ–∂–Ω–∏–º–∏, –Ω–∞–º –Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –º–µ–Ω—è—Ç—å –Ω–∏ `SystemInterpreter`, –Ω–∏ `ShapeBuilder`:

![–ú—ã –º–æ–∂–µ–º –∑–∞–º–µ–Ω–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, –Ω–µ –º–µ–Ω—è—è –º–µ—Å—Ç–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π](/img/blog/treees-changed-implementation.png)

–° —Ç–µ–º –∂–µ —É—Å–ø–µ—Ö–æ–º –º—ã –º–æ–≥–ª–∏ –±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ –Ω–∞ –¥—Ä—É–≥—É—é! –ú–æ–≥–ª–∏ –±—ã —Ä–∏—Å–æ–≤–∞—Ç—å —Ç—Ä—ë—Ö–º–µ—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –∏–ª–∏ –Ω–µ –¥–µ—Ä–µ–≤–æ –≤–æ–≤—Å–µ, –∞ –¥—Ä—É–≥–æ–π —Ñ—Ä–∞–∫—Ç–∞–ª. –ü—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—ã —Ä–∞–±–æ—Ç–∞–ª–æ, –∫–∞–∫ –Ω–∏ –≤ —á—ë–º –Ω–∏ –±—ã–≤–∞–ª–æ:

![–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –¥—Ä—É–≥–æ–π](/img/blog/treees-different-implementation.png)

## –ß—Ç–æ —É –Ω–∞—Å –ø–æ–ª—É—á–∏–ª–æ—Å—å

–î–∞–≤–∞–π—Ç–µ —Ç–µ–ø–µ—Ä—å —Å–æ–±–µ—Ä—ë–º –≤—Å—é —Å–∏—Å—Ç–µ–º—É –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –≤ –∫–∞–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –Ω–∞—Ö–æ–¥—è—Ç—Å—è –º–æ–¥—É–ª–∏ –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º.

![–î–∏–∞–≥—Ä–∞–º–º–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –æ—Ç–º–µ—á–µ–Ω–Ω—ã–º–∏ –≤—Ö–æ–¥–∞–º–∏ –∏ –≤—ã—Ö–æ–¥–∞–º–∏](/img/blog/treees-architecture-diagram.png)

–ú–æ–¥—É–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏. –ü–æ–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –Ω–µ –º–µ–Ω—è—é—Ç—Å—è, –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ª—é–±–æ–≥–æ –º–æ–¥—É–ª—è –Ω–∞ –¥—Ä—É–≥—É—é, –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

–≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏: –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –º–æ–∂–Ω–æ _—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∏–∑–æ–ª—è—Ü–∏–∏_ –æ—Ç–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º—ã –º–æ–∂–µ–º –∑–∞–º–µ–Ω–∏—Ç—å [–º–æ–∫–∞–º–∏](https://ru.wikipedia.org/wiki/Mock-–æ–±—ä–µ–∫—Ç), —Ä–µ–∞–ª–∏–∑—É—é—â–∏–º–∏ —Ç–µ –∂–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã. –¢–æ–≥–¥–∞ –Ω–µ –ø—Ä–∏–¥—ë—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –Ω–∞—Å—Ç–æ—è—â–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ç–∞–∫–∂–µ –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–∞–¥–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å. –ù–∞–º –ø—Ä–æ—â–µ _–Ω–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏_, –µ—Å–ª–∏ –º—ã –∑–Ω–∞–µ–º, –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –ø—É–±–ª–∏—á–Ω—ã.

–ï—â—ë –æ–¥–∏–Ω –ø–ª—é—Å ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ-—Ä–∞–∑–Ω–æ–º—É _—Å–æ—á–µ—Ç–∞—Ç—å –º–æ–¥—É–ª–∏ –≤ —Å–±–æ—Ä–∫–∞—Ö_, —á—Ç–æ–±—ã –¥–µ–ø–ª–æ–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—É—Å–∫–∞–º–∏. –û—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω–æ –æ–± —ç—Ç–æ–º –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ [DDD, Hexagonal, Onion, Clean, CQRS, ‚Ä¶How I put it all together](https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/).

–ï—Å–ª–∏ –º—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö–æ—Ç–∏–º –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–æ –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –º–æ–¥—É–ª–∏ –∏–∑ —ç—Ç–æ–≥–æ —Å–ª–æ—è:

![–î–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —Å–ª–æ—è–º–∏](/img/blog/treees-architecture-with-layers.png)

–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚Äî –≤—Å–µ–≥–¥–∞ _–∫ –¥–æ–º–µ–Ω—É_, –∏–∑-–∑–∞ —á–µ–≥–æ –¥–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º. –ú—ã –º–æ–∂–µ–º –µ–≥–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–ª—è –¥—Ä—É–≥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ —Å –¥—Ä—É–≥–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.

## –ó–∞–º–µ—Ç–∫–∞ –Ω–∞ –ø–æ–ª—è—Ö –æ–± –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏ Share Kernel

–ü–æ–¥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –æ–±—ã—á–Ω–æ –ø–æ–Ω–∏–º–∞—é—Ç –∫–æ–¥, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã —Ü–µ–ø–ª—è–µ–º—Å—è –∫ –ë–î, –ø–æ–∏—Å–∫—É –∏ –¥—Ä—É–≥–∏–º _—É–ø—Ä–∞–≤–ª—è–µ–º—ã–º –≤–Ω–µ—à–Ω–∏–º_ —Å–µ—Ä–≤–∏—Å–∞–º.

–£ –Ω–∞—Å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–µ –±—ã–ª–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –±—ã–ª–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ë–î –∏–ª–∏ –≤ –≤–∏–¥–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏. (–°—Ç–∞–≤—å –ª–æ–π—Å, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –ø–æ—è–≤–∏–ª—Å—è –º–æ–¥—É–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —Ñ–∞–π–ª.)

–ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –º–æ–¥—É–ª–∏ –±—ã–ª–∏ –±—ã –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏:

- –≤ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–º —Å–ª–æ–µ –º—ã –±—ã –æ–ø–∏—Å–∞–ª–∏ —É—Å–ª–æ–≤–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª, –∞ —Ç–∞–∫–∂–µ –ø–æ—Ä—Ç—ã ‚Äî –∫–∞–∫ –∏–º–µ–Ω–Ω–æ _–Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ö–æ—á–µ—Ç_ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ;
- –≤ —Å–ª–æ–µ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ ‚Äî –∫–∞–∫ –ø–æ–¥—Ä—É–∂–∏—Ç—å –Ω–∞—à –ø–æ—Ä—Ç –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

Shared Kernel ‚Äî —ç—Ç–æ –≤—Å—ë, –æ—Ç —á–µ–≥–æ [–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–≤–∏—Å—è—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥—É–ª–µ–π](https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/), –±—É–¥—É—á–∏ –ø—Ä–∏ —ç—Ç–æ–º –≤—Å—ë –µ—â—ë —Ä–∞—Å—Ü–µ–ø–ª–µ–Ω–Ω—ã–º–∏. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å `lib.d.ts`, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ, –¥–∞–∂–µ –Ω–µ –∑–∞–º–µ—á–∞—è.

–ï—Å–ª–∏ –∫–æ–ø–Ω—É—Ç—å —á—É—Ç—å —à–∏—Ä–µ, —Ç–æ _—Å –æ–≥–æ–≤–æ—Ä–∫–æ–π_ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤ –Ω–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ç–æ–∂–µ –º–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å Shared Kernel.

–ú—ã –Ω–µ —Å—Å—ã–ª–∞–µ–º—Å—è –Ω–∞ –º–æ–¥—É–ª—å `L-system`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –Ω–µ–≥–æ —Ç–∏–ø `Expression`; –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —É –Ω–∞—Å –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º –º–æ–¥—É–ª—è–º, —Ö–æ—Ç—è –æ–Ω–∏ –ø—Ä–∏ —ç—Ç–æ–º –≤—Å—ë –µ—â—ë —Ä–∞—Å—Ü–µ–ø–ª–µ–Ω—ã. –≠—Ç–æ, –ø—Ä–∞–≤–¥–∞, –±–æ–ª—å—à–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π ‚Äî –≤–µ–¥—å –µ—Å–ª–∏ –º—ã ¬´–∑–∞–ø–µ—á–∞—Ç–∞–µ–º¬ª —Ç–∏–ø—ã –≤–Ω—É—Ç—Ä–∏ `.ts` —Ñ–∞–π–ª–æ–≤, —Ç–æ –Ω–∞–º –ø—Ä–∏–¥—ë—Ç—Å—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –æ–±—ã—á–Ω—ã–º `import`.

## –ß—Ç–æ –µ—â—ë –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

–ï—Å–ª–∏ –ø–æ–±—ã—Ç—å –∏–¥–µ–∞–ª–∏—Å—Ç–∞–º–∏, —Ç–æ –º–æ–∂–Ω–æ –ø—Ä–∏–¥—É–º–∞—Ç—å —Å–µ–±–µ –µ—â—ë –∫—É—á—É –∑–∞–¥–∞—á üòÉ<br />–ù—É, –Ω–∞–ø—Ä–∏–º–µ—Ä:

- –î–æ–±–∞–≤–∏—Ç—å [–ø–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥](https://ru.wikipedia.org/wiki/–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ_—Å_–æ–±—Ä–∞–∑—Ü–æ–º) –≤ –º–µ—Ç–æ–¥ `translateToken` –∫–ª–∞—Å—Å–∞ `SystemToGeometryMapper`, —á—Ç–æ–±—ã —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –µ–º—É, –∫–∞–∫–∏–µ —Ç–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –ø–æ–ø–∞—Å—Ç—å—Å—è, –∞ –∫–∞–∫–∏–µ –Ω–µ—Ç.
- –°–¥–µ–ª–∞—Ç—å —Ç–∏–ø [`Instruction`](https://github.com/bespoyasov/treees/blob/a09fce0cbd69c8f078d257c3c5b01eb6aedeb6e4/src/interpreter/types.ts#L4) –±–æ–ª–µ–µ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–º, –≤—ã–Ω–µ—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ¬´–∫–∏—Å—Ç–∏¬ª –≤ –ø–æ–¥-–æ–±—ä–µ–∫—Ç.
- –í—ã–Ω–µ—Å—Ç–∏ [—Ü–≤–µ—Ç–∞ –ª–∏—Å—Ç—å–µ–≤](https://github.com/bespoyasov/treees/blob/main/src/interpreter/constants.ts) –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏; –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è ¬´—Ç–µ–º¬ª (–ª–∏—Å—Ç—å—è –Ω–∞ –∑–∞–∫–∞—Ç–µ, –Ω–æ—á—å—é).
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è `PixelRatioSource`, —á—Ç–æ–±—ã –Ω–µ [–∑–∞–≤–∏—Å–µ—Ç—å](https://github.com/bespoyasov/treees/blob/a09fce0cbd69c8f078d257c3c5b01eb6aedeb6e4/src/dom/composition.ts#L6) –Ω–∞–ø—Ä—è–º—É—é –æ—Ç `window`.
- –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ [`ElementSource`](https://github.com/bespoyasov/treees/blob/a09fce0cbd69c8f078d257c3c5b01eb6aedeb6e4/src/dom/types.ts#L2) –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–µ `Nullable<HTMLElement>`, –∞ —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–∏–ø, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å—Å—è –∫ HTML-—Ä–∞–∑–º–µ—Ç–∫–µ.
- –ò–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å `internal`-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—è –Ω–∞—Ä—É–∂—É —Ç–æ–ª—å–∫–æ —Ç–∏–ø—ã –∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –∏–∑ –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è.
- –°–¥–µ–ª–∞—Ç—å [–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä](https://github.com/bespoyasov/treees/blob/main/src/interpreter/implementation.ts) –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ: –ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω–∞ –∫–∞–∫–∏–µ –ø–æ–¥–º–æ–¥—É–ª–∏ –µ–≥–æ —Ä–∞–∑–±–∏—Ç—å, —á—Ç–æ–±—ã –∫–ª–∞—Å—Å –Ω–µ –±—ã–ª —Ç–∞–∫–∏–º –±–æ–ª—å—à–∏–º –∫–∞–∫ —Å–µ–π—á–∞—Å.

–í –æ–±—â–µ–º, –º–æ–∂–Ω–æ –µ—â—ë –Ω–∞–¥ —á–µ–º-—Ç–æ –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ‚Äî –≤–ø–æ–ª–Ω–µ —Å–æ–π–¥—ë—Ç üôÇ

## –°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã

–î—Ä—É–≥–∏–µ –ø–æ—Å—Ç—ã –∏–∑ —Å–µ—Ä–∏–∏, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç –∂–∏–≤—å—ë–º:

- [–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ](/showcase/treees/)
- [–ü—Ä–æ–µ–∫—Ç –Ω–∞ –ì–∏—Ç—Ö–∞–±–µ](https://github.com/bespoyasov/treees)
- [–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å](/blog/generating-trees-on-canvas-using-typescript-and-oop-2)
- [–¢—Ä–µ—Ç—å—è —á–∞—Å—Ç—å](/blog/generating-trees-on-canvas-using-typescript-and-oop-3)

–°—Å—ã–ª–∫–∏ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ—Å—Ç–∞:

- [–°—Ç–µ–∫, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö](https://ru.wikipedia.org/wiki/–°—Ç–µ–∫)
- [–ú–æ–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](https://ru.wikipedia.org/wiki/Mock-–æ–±—ä–µ–∫—Ç)
- [Shared Kernel](https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/)
- [–ü–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥](https://ru.wikipedia.org/wiki/–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ_—Å_–æ–±—Ä–∞–∑—Ü–æ–º)

L-—Å–∏—Å—Ç–µ–º—ã, —Ñ—Ä–∞–∫—Ç–∞–ª—ã –∏ –≤–æ—Ç —ç—Ç–æ –≤—Å—ë:

- [–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å—ë –Ω–∞—á–∞–ª–æ—Å—å](https://www.youtube.com/watch?v=mAz46Z5curo)
- [L-—Å–∏—Å—Ç–µ–º—ã](https://ru.wikipedia.org/wiki/L-—Å–∏—Å—Ç–µ–º–∞)
- [–î–µ—Ä–µ–≤–æ –ü–∏—Ñ–∞–≥–æ—Ä–∞](https://ru.wikipedia.org/wiki/–î–µ—Ä–µ–≤–æ_–ü–∏—Ñ–∞–≥–æ—Ä–∞)

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –û–û–ü, DI:

- [–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞. –†–æ–±–µ—Ä—Ç –ú–∞—Ä—Ç–∏–Ω](/blog/clean-architecture/)
- [Domain Driven Design](https://en.wikipedia.org/wiki/Domain-driven_design)
- [DDD, Hexagonal, Onion, Clean, CQRS, ‚Ä¶How I put it all together](https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/)
- [DI —Å TS –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ](/blog/di-ts-in-practice/)
- [–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è](<https://ru.wikipedia.org/wiki/–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è_(–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ)>).
- [–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –æ–±—ä–µ–∫—Ç–æ–≤](https://simpleinjector.readthedocs.io/en/latest/lifetimes.html)

–ü—Ä–∏–Ω—Ü–∏–ø—ã SOLID:

- [–ü—Ä–∏–Ω—Ü–∏–ø –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, SRP](https://ota-solid.now.sh/srp)
- [–ü—Ä–∏–Ω—Ü–∏–ø –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏ –∏ –∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏, OCP](https://ota-solid.now.sh/ocp)
- [–ü—Ä–∏–Ω—Ü–∏–ø –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –õ–∏—Å–∫–æ–≤, LSP](https://ota-solid.now.sh/lsp)
- [–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, ISP](https://ota-solid.now.sh/lsp)
- [–ü—Ä–∏–Ω—Ü–∏–ø –∏–Ω–≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, DIP](https://ota-solid.now.sh/dip)
- [–ó–∞—Ü–µ–ø–ª–µ–Ω–∏–µ –∫–æ–¥–∞](https://ru.wikipedia.org/wiki/–ó–∞—Ü–µ–ø–ª–µ–Ω–∏–µ_%28–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ%29)

–®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, TypeScript, C#:

- [–§–∞—Å–∞–¥](https://github.com/kamranahmedse/design-patterns-for-humans#-facade)
- [–ê–¥–∞–ø—Ç–µ—Ä](https://github.com/kamranahmedse/design-patterns-for-humans#-adapter)
- [Type Aliases](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-aliases)
- [–ü–æ–ª—è –∏ —Å–≤–æ–π—Å—Ç–≤–∞ –∫–ª–∞—Å—Å–∞](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/properties)

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

- [createapp.dev](https://createapp.dev)
- [–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä](https://github.com/wessberg/di-compiler#faq)
