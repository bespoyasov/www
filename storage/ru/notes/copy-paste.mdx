---
title: Копипаста в коде
description: Копипаста в коде — это не зло, а инструмент.
datetime: 2018-08-22T15:00
slug: /blog/copy-paste
tags:
  - opinion
  - dev
  - communication
  - refactoring
  - favorite
---

# Копипаста в коде

Копипаста в коде — это не зло, а инструмент.

Не удаляйте дублирование сразу. Дайте ему показать вам, как всё на самом деле работает, и какие паттерны вы ещё не увидели.

Удаление дублирования — это прогнозирование будущего. Чем больше исходных данных удастся собрать, тем точнее будет прогноз.

Обычно я жду 3 повторов, чтобы начать чистить код. А чтобы не потерять места с копипастой, помечаю их коммент-флагом _@DUPLICATE_.

После самого флага пишу, какую функциональность он дублирует. Это даёт флагу осмысленное и уникальное имя, по которому потом проще искать места для рефакторинга. Выглядит так:

```js
// @DUPLICATE: solves difficult problem
const someFunc = (a, b) => {
  /* some sophisticated logic */
};

// @DUPLICATE: solves difficult problem
const duplicatesFunctionality = (a, b) => {
  /* the same sophisticated logic */
};
```

Нет, я не против [DRY](https://ru.wikipedia.org/wiki/Don’t_repeat_yourself). Я за то, чтобы использовать его с умом.<br />Да, утверждение холиварное. Сорри, если вдруг заполыхало.
