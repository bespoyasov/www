---
title: –†–∏—Å—É–µ–º –¥–µ—Ä–µ–≤—å—è –Ω–∞ Canvas —Å –ø–æ–º–æ—â—å—é L-—Å–∏—Å—Ç–µ–º, TypeScript –∏ –û–û–ü
description: –ü–∏—à–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–µ—Ä–µ–≤—å–µ–≤ —Å –ø–æ–º–æ—â—å—é TypeScript –ø–æ –≤—Å–µ–º –ø—Ä–∞–≤–∏–ª–∞–º –û–û–ü –∏ –∑–∞–≤–µ—Ç–∞–º ¬´–ß–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã¬ª –ú–∞—Ä—Ç–∏–Ω–∞
datetime: 2021-04-10T12:00
slug: /blog/generating-trees-on-canvas-using-typescript-and-oop
cover: /images/content/generating-trees-on-canvas-using-typescript-and-oop/tree-example.png
tags:
  - dev
  - favorite
  - architecture
  - oop
  - solid
  - ts
---

# –†–∏—Å—É–µ–º –¥–µ—Ä–µ–≤—å—è –Ω–∞ canvas —Å –ø–æ–º–æ—â—å—é <nobr>L-—Å–∏—Å—Ç–µ–º</nobr>, TypeScript –∏ –û–û–ü

–Ø —Ç—É—Ç –Ω–µ–¥–∞–≤–Ω–æ –≤–¥–æ—Ö–Ω–æ–≤–∏–ª—Å—è –æ–¥–Ω–∏–º [–≤–∏–¥–æ—Å–æ–º –Ω–∞ –Æ—Ç—É–±–µ](https://www.youtube.com/watch?v=mAz46Z5curo), –≤ –Ω—ë–º –∞–≤—Ç–æ—Ä –Ω–∞–ø–∏—Å–∞–ª –Ω–∞ Python —Ä–∏—Å–æ–≤–∞–ª–∫—É –¥–µ—Ä–µ–≤—å–µ–≤. –Ø –ø–æ–¥—É–º–∞–ª, –∞ —á–µ–≥–æ –± –Ω–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —ç—Ç–æ –Ω–∞ –≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö, –∏ –ø–æ–≤—Ç–æ—Ä–∏–ª üòÉ

–í —ç—Ç–æ–π —Å–µ—Ä–∏–∏ –∏–∑ 3 –ø–æ—Å—Ç–æ–≤ –º—ã –Ω–∞–ø–∏—à–µ–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∏—Å–æ–≤–∞—Ç—å –¥–µ—Ä–µ–≤—å—è –Ω–∞ `canvas`. –ß—Ç–æ–±—ã –±—ã–ª–æ –≤–µ—Å–µ–ª–µ–µ, –º—ã —Å–¥–µ–ª–∞–µ–º –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ –Ω–∞–ø–∏—à–µ–º –∫–æ–¥ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –û–û–ü. –Ø —Ä–∞—Å—Å–∫–∞–∂—É –æ–± –æ—Å–Ω–æ–≤–∞—Ö –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ–∫–∞–∂—É –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TypeScript, —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å –≤ –û–û–ü —Å—Ç–∏–ª–µ.

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º—ã –Ω–∞–ø–∏—à–µ–º [–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ](/showcase/treees/), –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç —Ä–∏—Å–æ–≤–∞—Ç—å –≤–æ—Ç —Ç–∞–∫—É—é –∫—Ä–∞—Å–æ—Ç—É:

![–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞](/images/content/generating-trees-on-canvas-using-typescript-and-oop/tree-example.png)

...–ò —Ä–∞–∑–±–µ—Ä—ë–º –∏–¥–µ–∏ –∏ –ø—Ä–∏—ë–º—ã, —Å–∞–º—ã–µ —É–¥–∞—á–Ω—ã–µ –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –≤ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

## –ß—Ç–æ —Å—Ç–æ–∏—Ç –∑–Ω–∞—Ç—å –ø–µ—Ä–µ–¥ –ø—Ä–æ—á—Ç–µ–Ω–∏–µ–º

–Ø –æ–∂–∏–¥–∞—é, —á—Ç–æ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –±–∞–∑–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ–± –û–û–ü, –∫–ª–∞—Å—Å–∞—Ö –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö. –î–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –±—É–¥–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–Ω–∏–º–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π, –∞ —Ç–∞–∫–∂–µ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

–û –≤–Ω–µ–¥—Ä–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —É –º–µ–Ω—è —É–∂–µ –µ—Å—Ç—å [–±–æ–ª—å—à–æ–π –ø–æ—Å—Ç](/blog/di-ts-in-practice/). –ï—Å–ª–∏ –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ, –∫–æ–≥–¥–∞ —Å–ª—ã—à–∏—Ç–µ ¬´DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä¬ª, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–æ—á–µ—Å—Ç—å —Å–ø–µ—Ä–≤–∞ –µ–≥–æ, –∞ –ø–æ—Ç–æ–º –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å—é–¥–∞.

–¢–∞–∫–∂–µ –º—ã —á–∞—Å—Ç–æ –±—É–¥–µ–º —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ [–ø—Ä–∏–Ω—Ü–∏–ø—ã SOLID](https://ota-solid.now.sh). –í–∞–º –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–Ω–∞—Ç—å –∏—Ö –¥–æ—Å–∫–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ, –µ—Å–ª–∏ –≤—ã —á—Ç–æ-—Ç–æ –æ –Ω–∏—Ö —Å–ª—ã—à–∞–ª–∏. –°–æ –≤—Å–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–º —Ä–∞–∑–±–µ—Ä—ë–º—Å—è —É–∂–µ –Ω–∞ –º–µ—Å—Ç–µ.

## –ü–ª–∞–Ω –Ω–∞ –ø–µ—Ä–≤—É—é —á–∞—Å—Ç—å

–í –ø–µ—Ä–≤–æ–π —á–∞—Å—Ç–∏ –º—ã —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–ª–µ–¥—É—è —Å–æ–≤–µ—Ç–∞–º –∏–∑ [¬´–ß–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã¬ª](/blog/clean-architecture/) –ú–∞—Ä—Ç–∏–Ω–∞ –∏ [Domain Driven Design](https://en.wikipedia.org/wiki/Domain-driven_design). –ó–∞—Ç–µ–º –Ω–∞—Å—Ç—Ä–æ–∏–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –¥–æ–±–∞–≤–∏–º –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –í –∫–æ–Ω—Ü–µ –Ω–∞–ø–∏—à–µ–º –∫–æ–¥ –æ–¥–Ω–æ–≥–æ –∏–∑ –º–æ–¥—É–ª–µ–π –¥–æ–º–µ–Ω–Ω–æ–≥–æ —Å–ª–æ—è.

–ù–∞—á–Ω—ë–º —Å –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## –ö–∞–∫–∏–µ –º–æ–¥—É–ª–∏ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è

–ú—ã –º–æ–∂–µ–º –Ω–∞–ø–∏—Å–∞—Ç—å –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–¥–Ω–æ–π –±–æ–ª—å—à–æ–π –ø—Ä–æ—Å—Ç—ã–Ω—ë–π, –Ω–æ –¥–µ–ª–∞—Ç—å —Ç–∞–∫ –∫–æ–Ω–µ—á–Ω–æ –∂–µ –Ω–µ –±—É–¥–µ–º üòÉ<br />–ù–∞–º —Å—Ç–æ–∏—Ç [—Ä–∞–∑–¥–µ–ª–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞](https://ota-solid.now.sh/srp) –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏. –î–∞–≤–∞–π—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–∏–º, –∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –ø–µ—Ä–µ–¥ –Ω–∞–º–∏ —Å—Ç–æ—è—Ç.

### –ú–æ–¥—É–ª—å L-—Å–∏—Å—Ç–µ–º

–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–µ—Ä–µ–≤—å–µ–≤ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [L-—Å–∏—Å—Ç–µ–º—ã](https://ru.wikipedia.org/wiki/L-—Å–∏—Å—Ç–µ–º–∞) ‚Äî –Ω–∞–±–æ—Ä—ã —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –ø—Ä–∞–≤–∏–ª, –∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫ —ç—Ç–∏ —Å—É—â–Ω–æ—Å—Ç–∏ –º–µ–Ω—è—é—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º.

–î–µ—Ä–µ–≤—å—è ‚Äî —ç—Ç–æ —Ñ—Ä–∞–∫—Ç–∞–ª—ã, –∞ L-—Å–∏—Å—Ç–µ–º—ã —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ñ—Ä–∞–∫—Ç–∞–ª–æ–≤. –ü–µ—Ä–≤—ã–π –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–º –±—É–¥–µ—Ç –Ω—É–∂–µ–Ω, ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–∞–∫–∏—Ö L-—Å–∏—Å—Ç–µ–º. –û–Ω –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç–æ–º –º—ã –±—É–¥–µ–º –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è.

### –ú–æ–¥—É–ª—å –≥–µ–æ–º–µ—Ç—Ä–∏–∏

–í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤—ã –¥–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ _–¥–µ—Ä–µ–≤–∞_ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [–¥–µ—Ä–µ–≤–æ –ü–∏—Ñ–∞–≥–æ—Ä–∞](https://ru.wikipedia.org/wiki/–î–µ—Ä–µ–≤–æ_–ü–∏—Ñ–∞–≥–æ—Ä–∞). –í –∫–æ–Ω—Ü–µ –º—ã –¥–æ–±–∞–≤–∏–º —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –¥–µ—Ä–µ–≤–æ –±—ã–ª–æ –±–æ–ª—å—à–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–µ–µ, –Ω–æ –∑–∞ –æ—Å–Ω–æ–≤—É –≤–æ–∑—å–º—ë–º –∏–º–µ–Ω–Ω–æ —ç—Ç—É —Ñ–∏–≥—É—Ä—É.

![–ü—è—Ç–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –¥–µ—Ä–µ–≤–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞; –Ω–∞ –æ—á–µ—Ä–µ–¥–Ω–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –∏–∑ –∫–∞–∂–¥–æ–π –≤–µ—Ç–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ 2 –Ω–æ–≤—ã—Ö](/images/content/generating-trees-on-canvas-using-typescript-and-oop/pythagoras-tree.png)

–ß—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫–æ–π –¥–ª–∏–Ω—ã –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–∏–Ω–∏—è –Ω–∞ –ø–æ–ª–æ—Ç–Ω–µ –∏ –∫–∞–∫–æ–π —É –Ω–µ—ë –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–≥–æ–ª, –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –º–æ–¥—É–ª—å –≥–µ–æ–º–µ—Ç—Ä–∏–∏. –û–Ω –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Ç–æ—á–µ–∫ –æ—Ç—Ä–µ–∑–∫–æ–≤ –¥–µ—Ä–µ–≤–∞.

### –ú–æ–¥—É–ª–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ L-—Å–∏—Å—Ç–µ–º—ã, –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ DOM

–î–ª—è –≤—ã–≤–æ–¥–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ DOM –∏ —Ä–∞–±–æ—Ç–µ —Å `canvas`. –¢–∞–∫–∂–µ –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è ¬´–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫¬ª —Å —è–∑—ã–∫–∞ L-—Å–∏—Å—Ç–µ–º –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –Ω–∞ `canvas`.

–ö–æ–≥–¥–∞ –º—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏—Å—å —Å –∑–∞–¥–∞—á–∞–º–∏, —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –æ–ø—Ä–µ–¥–µ–ª–∏–º, –≤ –∫–∞–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –º–æ–¥—É–ª–∏ –±—É–¥—É—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º —Å–æ—Å—Ç–æ—è—Ç—å.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ö–æ–≥–¥–∞ —è –≥–æ–≤–æ—Ä—é –æ–± –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ç—å—é [DDD, Hexagonal, Onion, Clean, CQRS, ‚Ä¶How I put it all together](https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/). –í –Ω–µ–π –¥–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞–Ω—ã –ø—Ä–∏–Ω—Ü–∏–ø—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –∫–æ–¥ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –º–æ–¥—É–ª–∏ –∏ —Å–ª–æ–∏. –ï—Å–ª–∏ –≤—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –∑–∞–¥–∞–≤–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å–æ–º ¬´–ê –∫–∞–∫ —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ ...?¬ª –≤ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –µ—Å—Ç—å –æ—Ç–≤–µ—Ç üòÉ

–Ø –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã, –∫–∞–∫ –æ—Å–Ω–æ–≤—É –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ü–æ —Ö–æ–¥—É –±—É–¥—É –æ–±—ä—è—Å–Ω—è—Ç—å –ø—Ä–∏—á–∏–Ω—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –≤—ã–¥–µ–ª—è—é –∫–∞–∫–æ–π-—Ç–æ —Å–ª–æ–π –∏–ª–∏ –º–æ–¥—É–ª—å, –Ω–æ –¥–ª—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Å–æ–≤–µ—Ç—É—é –ø—Ä–æ—á–µ—Å—Ç—å —ç—Ç—É —Å—Ç–∞—Ç—å—é.

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ª–æ—ë–≤:

- –¥–æ–º–µ–Ω–Ω–æ–≥–æ —Å–ª–æ—è (domain),
- –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ (application),
- —Å–ª–æ—è –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ (adapters).

### –î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π

–ö–æ–¥ –∏ –¥–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ–º —Å–ª–æ–µ ‚Äî —ç—Ç–æ _–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞_, —Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ª–∏—á–∞—é—Ç –æ–¥–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç –¥—Ä—É–≥–æ–≥–æ. –ú–æ–¥—É–ª–∏ –∏–∑ —ç—Ç–æ–≥–æ —Å–ª–æ—è –Ω–∏ –æ—Ç —á–µ–≥–æ –Ω–µ –∑–∞–≤–∏—Å—è—Ç.

–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –º–æ–¥—É–ª–∏ `L-system` –∏ `Geometry`. –ü–µ—Ä–≤—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–∞–º–æ–π L-—Å–∏—Å—Ç–µ–º—ã, –≤—Ç–æ—Ä–æ–π ‚Äî –∑–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—é –ª–∏–Ω–∏–π –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏.

### –ü—Ä–∏–∫–ª–∞–¥–Ω–æ–π —Å–ª–æ–π

–í –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–º —Å–ª–æ–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –ø—Ä–∞–≤–∏–ª–∞, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è _–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —ç—Ç–æ–≥–æ_ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í –Ω–∞—à–µ–º —ç—Ç–æ —Å–ª—É—á–∞–µ –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ `Interpreter`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Å–∏–º–≤–æ–ª—ã L-—Å–∏—Å—Ç–µ–º—ã –≤ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è.

–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –¥–æ–º–µ–Ω–Ω—ã–º –∏ –ø—Ä–∏–∫–ª–∞–¥–Ω—ã–º —Å–ª–æ—è–º–∏ –ø–æ—Ö–æ–∂–∞ –Ω–∞ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –º–µ–ª–æ–¥–∏–µ–π –∏ –º–∞–Ω–µ—Ä–æ–π –µ—ë –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è. –ú–µ–ª–æ–¥–∏—è –∑–∞–ø–∏—Å–∞–Ω–∞ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –Ω–æ—Ç–Ω–æ–π –≥—Ä–∞–º–æ—Ç—ã –∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è (–¥–æ–º–µ–Ω), –∞ –∞–∫–∫–æ–º–ø–∞–Ω–µ–º–µ–Ω—Ç, —Ç–µ–º–ø, —Ç–µ–º–±—Ä –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –ø–æ–¥ —Å–∏—Ç—É–∞—Ü–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ (–ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π —Å–ª–æ–π).

–ú–æ–¥—É–ª–∏ –≤ —ç—Ç–æ–º —Å–ª–æ–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –º–æ–¥—É–ª–µ–π –∏–∑ –¥–æ–º–µ–Ω–∞, –Ω–æ –±–æ–ª—å—à–µ –Ω–∏ –æ—Ç —á–µ–≥–æ.

–í –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–º —Å–ª–æ–µ —Ç–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –ø–æ—Ä—Ç—ã ‚Äî —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–∞–∫ _–≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç_ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏–ª–∏ –∫–∞–∫ _–Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ö–æ—á–µ—Ç_ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å.

–ü–æ—Ä—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è, —á—Ç–æ–±—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç—å –Ω—É–∂–¥—ã **–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**. –ï—Å–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–Ω–µ—à–Ω–µ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é, –º—ã –Ω–∞–ø–∏—à–µ–º _–∞–¥–∞–ø—Ç–µ—Ä_.

### –°–ª–æ–π –∞–¥–∞–ø—Ç–µ—Ä–æ–≤

_–ê–¥–∞–ø—Ç–µ—Ä_ ‚Äî —ç—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç _–Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å_ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —Ç–∞–∫–∏–º, –∫–∞–∫–æ–π _–Ω—É–∂–µ–Ω –Ω–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é_.

–£ –Ω–∞—Å –ø–æ—Ä—Ç ‚Äî —ç—Ç–æ –≤—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ï—ë –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–æ–≤–æ—Ä–∏—Ç, –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ –º–µ—Ç–æ–¥ –Ω–∞–¥–æ ¬´—Ç—Ä–æ–≥–Ω—É—Ç—å, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å¬ª.

<mark>–° –ø–æ–º–æ—â—å—é –ø–æ—Ä—Ç–∞ –º—ã –≥–æ–≤–æ—Ä–∏–º: ¬´–° –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –º–æ–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–∞–∫ –∏ –Ω–∏–∫–∞–∫ –∏–Ω–∞—á–µ¬ª</mark>

–ê–¥–∞–ø—Ç–µ—Ä—ã –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ ‚Äî —ç—Ç–æ –º–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DOM –∏ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ–º –Ω–∞ `canvas`.

### –í—Å—ë –≤–º–µ—Å—Ç–µ

–ï—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–∏—Ç—å –≤—Å—ë –≤ –æ–¥–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º–µ, —Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è –≤–æ—Ç —Ç–∞–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

![–î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ä–∞–∑–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–æ —Å–ª–æ—è–º –∏ –∑–æ–Ω–∞–º UI –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã](/images/content/generating-trees-on-canvas-using-typescript-and-oop/architecture.png)

–û–± Infrastructure –∏ Shared Kernel –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º –≤ –∫–æ–Ω—Ü–µ. –°–µ–π—á–∞—Å –æ–±—Ä–∞—Ç–∏–º –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Å—Ç—Ä–µ–ª–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ _–∫ –¥–æ–º–µ–Ω—É_. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ _–≤–Ω–µ—à–Ω–∏–µ —Å–ª–æ–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö_, –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –Ω–∞–æ–±–æ—Ä–æ—Ç.

–í —á—ë–º –ø–ª—é—Å –ø–æ–¥–æ–±–Ω–æ–≥–æ –¥–µ–ª–µ–Ω–∏—è –∫–æ–¥–∞? –ò—Ö –Ω–µ—Å–∫–æ–ª—å–∫–æ:

- –°–∞–º—ã–π –≥–ª–∞–≤–Ω—ã–π –∫–æ–¥ (–¥–æ–º–µ–Ω), –º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –æ—Ç –ø—Ä–æ–µ–∫—Ç–∞ –∫ –ø—Ä–æ–µ–∫—Ç—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –Ω–∏ –æ—Ç —á–µ–≥–æ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç.
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è (–≤ –∏–¥–µ–∞–ª–µ) –∑–∞–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∞–¥–∞–ø—Ç–µ—Ä—ã. –î–æ–ø—É—Å—Ç–∏–º –º—ã —Ä–µ—à–∏–ª–∏ —Å—ä–µ—Ö–∞—Ç—å —Å `canvas` –Ω–∞ `svg`: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º, –∏–∑–º–µ–Ω–∏—Ç—Å—è –ª–∏—à—å –∞–¥–∞–ø—Ç–µ—Ä –∫ —Ä–∏—Å–æ–≤–∞–ª–∫–µ.
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–¥–æ–±–Ω–æ –¥–µ–ª–∏—Ç—å –Ω–∞ ¬´–ø–∞–∫–µ—Ç—ã¬ª –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º ‚Äî –≤ —Å—Ç–∞—Ç—å–µ [DDD, Hexagonal, Onion, Clean, CQRS, ‚Ä¶How I put it all together](https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/).

–° –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å, –ø–µ—Ä–µ–π–¥—ë–º –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é –∏ –∫–æ–¥—É.

## –û–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–Ø –Ω–µ –±—É–¥—É –≤–¥–∞–≤–∞—Ç—å—Å—è –≤ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `webpack.config.js` –∏ `tsconfig.json`. –î–ª—è —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª [createapp.dev](https://createapp.dev), –∫–æ–Ω—Ñ–∏–≥–∏ –ø–æ—á—Ç–∏ –Ω–µ –º–µ–Ω—è–ª–∏—Å—å.

–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ —è –æ—Å—Ç–∞–≤–ª—é [—Å—Å—ã–ª–∫—É –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π](https://github.com/bespoyasov/treees) —Å–æ –≤—Å–µ–º–∏ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏. –û—Ç—Ç—É–¥–∞ –º–æ–∂–Ω–æ –∑–∞–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏, —à–∞–±–ª–æ–Ω—ã –∏ –∫–æ–¥ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –Ω–∞–ø–∏—à–µ–º, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ.

–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º—ã –±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [`wessberg/DI`](https://github.com/wessberg/di) –∫–∞–∫ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –ê —á—Ç–æ–±—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª—è–ª–∏—Å—å –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –∞ –Ω–µ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º [`wessberg/di-compiler`](https://github.com/wessberg/di-compiler).

–î–æ–±–∞–≤–∏–º –∫–æ–Ω—Ñ–∏–≥–∏ DI –≤ `webpack.config.js`

```js
// webpack.config.js

const { di } = require("@wessberg/di-compiler");

// ‚Ä¶

rules: [
  {
    test: /\.ts$/,
    use: [
      {
        loader: "ts-loader",
        options: {
          getCustomTransformers: (program) => di({ program }),
        },
      },
    ],
  },
],

// ‚Ä¶
```

–ö–∞—Å—Ç–æ–º–Ω—ã–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä `di` [–ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫–ª–∞—Å—Å—ã –Ω–∞ –º–µ—Å—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤](https://github.com/wessberg/di-compiler#faq), –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç. –í –±—É–¥—É—â–µ–º –º—ã –±—É–¥–µ–º —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É, –∫–∞–∫–æ–π –∫–ª–∞—Å—Å —Å –∫–∞–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º —Å–≤—è–∑–∞—Ç—å, —á—Ç–æ–±—ã —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä —ç—Ç–æ –∑–∞–º–µ—Ç–∏–ª –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–ª –∫–æ–¥.

–î–∞–ª—å—à–µ —Å–æ–∑–¥–∞–¥–∏–º —Å–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```ts
// `src/composition/core.ts`

import { DIContainer } from "@wessberg/di";
export const container = new DIContainer();
```

–≠—Ç–æ—Ç –æ–±—ä–µ–∫—Ç `container` –º—ã –∏ –±—É–¥–µ–º –≤ –±—É–¥—É—â–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π.

## –ü–∏—à–µ–º –∫–æ–¥ –¥–æ–º–µ–Ω–Ω–æ–≥–æ —Å–ª–æ—è

–ö–∞–∫ –º—ã –ø–æ–º–Ω–∏–º, –º–æ–¥—É–ª—å `l-system` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç L-—Å–∏—Å—Ç–µ–º—ã –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.

–°–ø–µ—Ä–≤–∞ –æ–±—ä—è–≤–∏–º –ø—É–±–ª–∏—á–Ω–æ–µ API, –∫–æ—Ç–æ—Ä—ã–º –±—É–¥—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏, –ø–æ—Ç–æ–º –Ω–∞–ø–∏—à–µ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, –∞ –≤ –∫–æ–Ω—Ü–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –º–æ–¥—É–ª—å –≤ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

### –û–±—ä—è–≤–ª—è–µ–º –ø—É–±–ª–∏—á–Ω–æ–µ API

–°–æ–∑–¥–∞–¥–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `SystemBuilder`. –≠—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –≤—Ö–æ–¥–Ω–æ–π —Ç–æ—á–∫–æ–π –≤ —ç—Ç–æ—Ç –º–æ–¥—É–ª—å:

```ts
// src/l-system/types.ts

export type SystemSettings = {
  rules: RuleSet;
  initiator: Axiom;
  iterations: IterationsCount;
};

export interface SystemBuilder {
  build(settings: SystemSettings): Expression;
}
```

–í—Å–µ –º–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –∫–∞–∫-–ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç L-—Å–∏—Å—Ç–µ–º—ã, –±—É–¥—É—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `SystemBuilder` –∏ _—Ç–æ–ª—å–∫–æ –æ—Ç –Ω–µ–≥–æ_. –ü–æ—á–µ–º—É –∏ –∑–∞—á–µ–º ‚Äî —è –æ–±—ä—è—Å–Ω—é —á—É—Ç—å-—á—É—Ç—å –ø–æ–∑–∂–µ üôÇ

–¢–∏–ø—ã `Axiom`, `RuleSet`, `IterationsCount` –∏ `Expression` ‚Äî —ç—Ç–æ [–∞–ª–∏–∞—Å—ã](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-aliases), –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞ –º–æ–¥—É–ª—è:

- `Axiom` ‚Äî —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Å–∏–º–≤–æ–ª, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ;
- `RuleSet` ‚Äî –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª, –ø–æ –∫–æ—Ç–æ—Ä—ã–º —Å–∏–º–≤–æ–ª—ã –º–µ–Ω—è—é—Ç—Å—è;
- `IterationsCount` ‚Äî —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å–∏–º–≤–æ–ª—ã;
- `Expression` ‚Äî¬†—Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π.

–í—Å–µ —ç—Ç–∏ —Ç–∏–ø—ã –º—ã –¥–µ–ª–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ —Å –ø–æ–º–æ—â—å—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π:

```ts
// typings/l-system.d.ts

type Combined<TCharacter> = TCharacter;
type Transformed<TExpression> = TExpression;

type Character = string;
type Variable = Character;
type Constant = Character;

type Expression = Combined<Variable | Constant>;
type RuleSet = Record<Expression, Transformed<Expression>>;

type Axiom = Variable;
type SystemState = Expression;
type IterationsCount = number;
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `SystemBuilder`

–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –º—ã –Ω–∞–ø–∏—à–µ–º –∫–ª–∞—Å—Å:

```ts
// src/l-system/implementation.ts

import { SystemBuilder, SystemSettings } from "./types";

export class Builder implements SystemBuilder {
  public build(settings: SystemSettings): Expression {
    // ‚Ä¶
  }
}
```

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∞—Å—Å–∞ –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –æ–Ω —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `SystemBuilder`. –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `implements` –ø—Ä–æ—Å–∏—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–ª–∞—Å—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã, _–∑–∞—è–≤–ª–µ–Ω–Ω—ã–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ_, –∞ —Ç–∞–∫–∂–µ —á—Ç–æ –∏—Ö —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∑–∞—è–≤–ª–µ–Ω–Ω–æ–π.

–ï—Å–ª–∏ –º—ã –≤ –∫–ª–∞—Å—Å–µ –∑–∞–±—É–¥–µ–º –ø—Ä–æ–ø–∏—Å–∞—Ç—å –º–µ—Ç–æ–¥ `build`, –∏–ª–∏ –æ–Ω –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤, –∏–ª–∏ –æ–Ω –±—É–¥–µ—Ç –Ω–µ –ø—É–±–ª–∏—á–Ω—ã–º, –∫–æ–¥ –Ω–µ —Å–æ–±–µ—Ä—ë—Ç—Å—è.

_–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å_ ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –û–Ω —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –æ–¥–Ω–æ–≥–æ –º–æ–¥—É–ª—è –ø–µ—Ä–µ–¥ –¥—Ä—É–≥–∏–º–∏, –æ–ø–∏—Å—ã–≤–∞—è, –∫–∞–∫ —ç—Ç–æ—Ç –º–æ–¥—É–ª—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏ –Ω–µ –≤–æ–ª–Ω—É–µ—Ç, –∏–º –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ `SystemBuilder.build` –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

–ú–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –º–æ–¥—É–ª—å ‚Äî —ç—Ç–æ —á—ë—Ä–Ω—ã–π —è—â–∏–∫. –£ –Ω–µ–≥–æ –µ—Å—Ç—å –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Å–≤–µ—Ä—Ö—É), –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞–∫ –∫ –º–æ–¥—É–ª—é –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è:

![–î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: —Å–≤–µ—Ä—Ö—É —É–∫–∞–∑–∞–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –∫ –º–æ–¥—É–ª—é –º–æ–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞](/images/content/generating-trees-on-canvas-using-typescript-and-oop/l-system-1.png)

–ï—Å–ª–∏ –º—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –º–æ–∂–µ–º –≤—ã–∑—ã–≤–∞—Ç—å `build` –∏ –ø–æ–ª—É—á–∏—Ç—å —Å–∏–º–≤–æ–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ L-—Å–∏—Å—Ç–µ–º—ã, –Ω–∞–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–≤–∞–∂–Ω–æ, _–∫–∞–∫–æ–π –≤–æ–æ–±—â–µ –º–æ–¥—É–ª—å –µ—ë —Ä–µ–∞–ª–∏–∑—É–µ—Ç_. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –∑–∞–º–µ–Ω—è–µ–º—ã–º, –º–µ–Ω–µ–µ [—Å—Ü–µ–ø–ª–µ–Ω–Ω—ã–º](https://ru.wikipedia.org/wiki/–ó–∞—Ü–µ–ø–ª–µ–Ω–∏–µ_%28–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ%29). –ö—Ä—É—Ç–æ!

–í–µ—Ä–Ω—ë–º—Å—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –ß—Ç–æ–±—ã –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–µ—Ä–µ–≤–æ –ü–∏—Ñ–∞–≥–æ—Ä–∞, –Ω–∞–º [–ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è](https://ru.wikipedia.org/wiki/L-—Å–∏—Å—Ç–µ–º–∞):

- –¥–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `"0"` –∏ `"1"`;
- –¥–≤–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã: `[` –∏ `]`;
- –∞–∫—Å–∏–æ–º–∞ (—Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Å–∏–º–≤–æ–ª): `"0"`;
- –∏ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è: `"1" ‚Üí "11"`, `"0" ‚Üí "1[0]0"`.

–¢–æ –µ—Å—Ç—å –º—ã –æ–∂–∏–¥–∞–µ–º, —á—Ç–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å —Å–∏–º–≤–æ–ª–∞ `"0"` —É –Ω–∞—Å –ø–æ–ª—É—á–∞—Ç—Å—è —Ç–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–º–≤–æ–ª–æ–≤:

- –Ω–∞ 1-–π –∏—Ç–µ—Ä–∞—Ü–∏–∏: `"1[0]0"`;
- –Ω–∞ 2-–π: `"11[1[0]0]1[0]0"`;
- –Ω–∞ 3-–π: `"1111[11[1[0]0]1[0]0]11[1[0]0]1[0]0"`;
- ‚Ä¶–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ.

–ù–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è ¬´–ª–æ–∫–∞–ª—å–Ω—ã–π —Å—Ç–µ–π—Ç¬ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –º—ã –±—É–¥–µ–º —Å–æ–±–∏—Ä–∞—Ç—å —Å–∏–º–≤–æ–ª—ã –ø–æ—Å–ª–µ –æ—á–µ—Ä–µ–¥–Ω–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏. –°–æ—Ö—Ä–∞–Ω–∏–º –µ–≥–æ –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º –ø–æ–ª–µ `state`. (–Ø –±—É–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–µ—Ä–º–∏–Ω–∞–º–∏ [–ø–æ–ª–µ –∏ —Å–≤–æ–π—Å—Ç–≤–æ –∫–ª–∞—Å—Å–∞](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/properties), –∫–∞–∫ —ç—Ç–æ –ø—Ä–∏–Ω—è—Ç–æ –≤ C#.)

–ò–∑ –æ–±—ä–µ–∫—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–æ—Å—Ç–∞–Ω–µ–º –∞–∫—Å–∏–æ–º—É, –ø—Ä–∞–≤–∏–ª–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ –ø—Ä–æ–≤–µ—Å—Ç–∏. –ù–∞ –∫–∞–∂–¥—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é –ø—Ä–∏–º–µ–Ω–∏–º –ø—Ä–∞–≤–∏–ª–∞:

```ts
// src/l-system/implementation.ts

import { SystemBuilder, SystemSettings } from "./types";

export class Builder implements SystemBuilder {
  private state: SystemState = "";

  public build({ axiom, rules, iterations }: SystemSettings): Expression {
    this.state = axiom;

    for (let i = 0; i < iterations; i++) {
      this.applyRules(rules);
    }

    return this.state;
  }
}
```

¬´–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞¬ª –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ ‚Äî —ç—Ç–æ –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ –∫–∞–∂–¥–æ–º—É —Å–∏–º–≤–æ–ª—É –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –∑–∞–º–µ–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ —Å–∏–º–≤–æ–ª—ã –∏–∑ –ø—Ä–∞–≤–∏–ª:

```
// src/l-system/implementation.ts
// ‚Ä¶

private applyRules(rules: RuleSet): void {
  const characters: List<Character> = this.state.split("");
  this.state = "";

  for (const character of characters) {
    const addition = rules[character] ?? character;
    this.state += addition;
  }
}

// ‚Ä¶
```

–ó–∞–º–µ—Ç—å—Ç–µ, —á—Ç–æ –º–µ—Ç–æ–¥ `applyRules` _–ø—Ä–∏–≤–∞—Ç–Ω—ã–π_ ‚Äî –º—ã –ø—Ä—è—á–µ–º –µ–≥–æ –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞. –ù–∞—Ä—É–∂—É –º—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

–ú—ã –ø–æ–º–Ω–∏–º, —á—Ç–æ –º–æ–¥—É–ª—è–º —Å–Ω–∞—Ä—É–∂–∏ –≤–∞–∂–Ω–æ –ª–∏—à—å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ü–æ—ç—Ç–æ–º—É –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å –¥–∞–Ω–Ω—ã–º–∏ ‚Äî –¥–µ–ª–æ _—Ç–æ–ª—å–∫–æ —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞_. –í—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–µ —Å —Å–∞–º–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ ‚Äî —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è [–∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è](<https://ru.wikipedia.org/wiki/–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è_(–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ)>).

–¢–µ–ø–µ—Ä—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –º–æ–¥—É–ª—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏ –ø–æ–ø—Ä–æ–±—É–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å.

### –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

–û–±—ã—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞—Å—Å–∞–º–∏ –º—ã —Å–æ–∑–¥–∞—ë–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —á–µ—Ä–µ–∑ `new`:

```ts
const builder = new Builder();
// builder.build();
```

–° –∫–ª–∞—Å—Å–æ–º `Builder` —ç—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –≤ –±—É–¥—É—â–µ–º —Å–æ —Å–ª–æ–∂–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏ —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –±—É–¥–µ—Ç –Ω–µ—É–¥–æ–±–Ω—ã–º. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

```ts
// src/l-system/composition.ts

// –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
import { container } from "../composition";

// ...–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
import { SystemBuilder } from "./types";

// ...–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é:
import { Builder } from "./implementation";

container.registerSingleton<SystemBuilder, Builder>();
```

–ù–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ–∫–µ –º—ã –≥–æ–≤–æ—Ä–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É, —á—Ç–æ–±—ã –∫–æ–≥–¥–∞ —É –Ω–µ–≥–æ —Å–ø—Ä–æ—Å—è—Ç _—á—Ç–æ-—Ç–æ, —á—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å_ `SystemBuilder`, –æ–Ω –≤–µ—Ä–Ω—É–ª _—ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞_ `Builder`.

–ú—ã –ø–æ–º–Ω–∏–º, —á—Ç–æ –≤—Å–µ –º–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å L-—Å–∏—Å—Ç–µ–º—ã, –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É. –ö–æ–≥–¥–∞ —ç—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–≤–∏–¥–∏—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –∏ –æ—Ç–¥–∞—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç.

–≠—Ç–æ —Ä–∞–∑–≤—è–∑—ã–≤–∞–µ—Ç —Ä—É–∫–∏: –µ—Å–ª–∏ –º—ã –∏–∑–º–µ–Ω–∏–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è, –Ω–∏—á—Ç–æ –±–æ–ª—å—à–µ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –ø–æ–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–∞–∫–∏–º –∂–µ. –¢–∞–∫ –º—ã —Å–æ–∑–¥–∞—ë–º ¬´–±–∞—Ä—å–µ—Ä¬ª, –∫–æ—Ç–æ—Ä—ã–π [–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∑–æ–Ω—É —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](https://ota-solid.now.sh/ocp).

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞, –æ—Å—Ç–∞–ª–æ—Å—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º —Ñ–∞–π–ª –≤ `index.ts`:

```ts
// src/composition/index.ts

import { container } from "./core";
import "../l-system/composition";

export { container };
```

### –ü–¥–∞–∂–∂–∏, –∞ —á—ë —Ç–∞–∫–æ–µ —Å–∏–Ω–≥–ª—Ç–æ–Ω?

–ó–¥–µ—Å—å `singleton` ‚Äî —ç—Ç–æ –≤–∏–¥ [–∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –æ–±—ä–µ–∫—Ç–æ–≤](https://simpleinjector.readthedocs.io/en/latest/lifetimes.html), –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–∑–¥–∞—Å—Ç. –í –æ–±—â–∏—Ö —á–µ—Ä—Ç–∞—Ö, `registerSingleton` —Å–æ–∑–¥–∞—ë—Ç –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Ç–æ–º –≤–Ω–µ–¥—Ä—è–µ—Ç –≤–æ –≤—Å–µ –º–µ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç –Ω–µ–≥–æ –∑–∞–≤–∏—Å—è—Ç.

–ß—É—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ —è –ø–∏—Å–∞–ª –æ–± —ç—Ç–æ–º –≤ [—Å—Ç–∞—Ç—å–µ –æ–± –∏–Ω—ä–µ–∫—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](https://bespoyasov.ru/blog/di-ts-in-practice/).

### –ê –∫–∞–∫ —ç—Ç–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è-—Ç–æ?

–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–π –≤–æ–ø—Ä–æ—Å üòÉ<br />–ò –ø—Ä–∞–≤–¥–∞, –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ —ç–∫–∑–µ–º–ø–ª—è—Ä `builder` –Ω–∞–º –Ω–µ –¥–æ—Å—Ç–∞—Ç—å. –ù–æ –º—ã –º–æ–∂–µ–º –ø–æ–ø—Ä–æ—Å–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–º –µ–≥–æ –≤—ã–¥–∞—Ç—å:

```ts
// src/index.ts

import { container } from "./composition";
import { SystemBuilder } from "./l-system/types";

const builder = container.get<SystemBuilder>();

console.log(
  builder.build({
    axiom: "0",
    iterations: 3,
    rules: { "1": "11", "0": "1[0]0" },
  }),
);

// –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:
// 1111[11[1[0]0]1[0]0]11[1[0]0]1[0]0
```

–í –∫–æ–¥–µ –≤—ã—à–µ –º—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `SystemBuilder`. –û–ø—è—Ç—å-—Ç–∞–∫–∏, —Å–Ω–∞—Ä—É–∂–∏ –º—ã –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ–º –æ –¥–µ—Ç–∞–ª—è—Ö –º–æ–¥—É–ª—è, –Ω–∞–º –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏—à—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

<mark>
  –°—Ä–∞–∑—É –ø—Ä–µ–¥—É–ø—Ä–µ–∂—É: –Ω–∞–ø—Ä—è–º—É—é –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã{" "}
  <strong>–Ω–µ–ª—å–∑—è –Ω–∏–≥–¥–µ, –∫—Ä–æ–º–µ –≤—Ö–æ–¥–Ω–æ–π —Ç–æ—á–∫–∏</strong> –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
</mark>

–£ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º—ã –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º _—á—Ç–æ-–Ω–∏–±—É–¥—å, —á—Ç–æ —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç_. –†–∞–Ω–µ–µ –º—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏ –∫–ª–∞—Å—Å `Builder` –∫–∞–∫ —Ç–∏–ø `SystemBuilder`:

```ts
container.registerSingleton<SystemBuilder, Builder>();
```

‚Ä¶–ü–æ—ç—Ç–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–Ω–∞–µ—Ç, —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–∞–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞ –Ω–∞–¥–æ —Å–æ–∑–¥–∞—Ç—å –∏ –≤–µ—Ä–Ω—É—Ç—å. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤ –æ–±—ä–µ–∫—Ç–µ `builder` –º—ã –ø–æ–ª—É—á–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ `Builder` —Å–æ –≤—Å–µ–º–∏ –ø—É–±–ª–∏—á–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–º–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:

![–í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ](/images/content/generating-trees-on-canvas-using-typescript-and-oop/builder-object.png)

–°–æ–±–µ—Ä—ë–º –ø—Ä–æ–µ–∫—Ç –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º, —Å—Ä–∞–±–æ—Ç–∞–ª–æ –ª–∏:

![–í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –æ–∂–∏–¥–∞–µ–º—ã–º ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç](/images/content/generating-trees-on-canvas-using-typescript-and-oop/console-output.png)

–£—Ä–∞! ü•≥<br />–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–Ω–∞—á–∏—Ç –º–æ–¥—É–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤–µ—Ä–Ω–æ.

## –í —Å–ª–µ–¥—É—é—â–∏—Ö —Å–µ—Ä–∏—è—Ö

–í–æ [–≤—Ç–æ—Ä–æ–π —á–∞—Å—Ç–∏](/blog/generating-trees-on-canvas-using-typescript-and-oop-2) –º—ã —Å–æ–∑–¥–∞–¥–∏–º –º–æ–¥—É–ª—å –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø–æ–ª–æ–∂–µ–Ω–∏—è —Ç–æ—á–µ–∫ –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏. –ü–æ—Å–ª–µ –Ω–µ–≥–æ —Å–æ–∑–¥–∞–¥–∏–º –º–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DOM –∏ `canvas`. –ê –≤ –∫–æ–Ω—Ü–µ –≤—ã–≤–µ–¥–µ–º –Ω–∞ —ç–∫—Ä–∞–Ω –ø–µ—Ä–≤—ã–π –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π —Ä–∏—Å—É–Ω–æ–∫.

–í [—Ç—Ä–µ—Ç—å–µ–π —á–∞—Å—Ç–∏](/blog/generating-trees-on-canvas-using-typescript-and-oop-3) –Ω–∞–ø–∏—à–µ–º ¬´–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫¬ª —Å —è–∑—ã–∫–∞ L-—Å–∏—Å—Ç–µ–º –Ω–∞ —è–∑—ã–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –Ω–∞ `canvas`. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–µ—Ä–µ–≤–æ –ü–∏—Ñ–∞–≥–æ—Ä–∞, –¥–æ–±–∞–≤–∏–º –µ–º—É —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –∏ —Ü–≤–µ—Ç–∞, —á—Ç–æ–±—ã –æ–Ω–æ —Å—Ç–∞–ª–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–µ–µ –¥–µ—Ä–µ–≤–æ.

## –°—Å—ã–ª–∫–∏ –∏–∑ –ø–æ—Å—Ç–∞

–î—Ä—É–≥–∏–µ –ø–æ—Å—Ç—ã –∏–∑ —Å–µ—Ä–∏–∏, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç –∂–∏–≤—å—ë–º:

- [–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ](/showcase/treees/)
- [–ü—Ä–æ–µ–∫—Ç –Ω–∞ –ì–∏—Ç—Ö–∞–±–µ](https://github.com/bespoyasov/treees)
- [–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å](/blog/generating-trees-on-canvas-using-typescript-and-oop-2)
- [–¢—Ä–µ—Ç—å—è —á–∞—Å—Ç—å](/blog/generating-trees-on-canvas-using-typescript-and-oop-3)

L-—Å–∏—Å—Ç–µ–º—ã, —Ñ—Ä–∞–∫—Ç–∞–ª—ã –∏ –≤–æ—Ç —ç—Ç–æ –≤—Å—ë:

- [–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å—ë –Ω–∞—á–∞–ª–æ—Å—å](https://www.youtube.com/watch?v=mAz46Z5curo)
- [L-—Å–∏—Å—Ç–µ–º—ã](https://ru.wikipedia.org/wiki/L-—Å–∏—Å—Ç–µ–º–∞)
- [–î–µ—Ä–µ–≤–æ –ü–∏—Ñ–∞–≥–æ—Ä–∞](https://ru.wikipedia.org/wiki/–î–µ—Ä–µ–≤–æ_–ü–∏—Ñ–∞–≥–æ—Ä–∞)

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –û–û–ü, DI:

- [–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞. –†–æ–±–µ—Ä—Ç –ú–∞—Ä—Ç–∏–Ω](/blog/clean-architecture/)
- [Domain Driven Design](https://en.wikipedia.org/wiki/Domain-driven_design)
- [DDD, Hexagonal, Onion, Clean, CQRS, ‚Ä¶How I put it all together](https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/)
- [DI —Å TS –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ](/blog/di-ts-in-practice/)
- [–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è](<https://ru.wikipedia.org/wiki/–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è_(–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ)>).
- [–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –æ–±—ä–µ–∫—Ç–æ–≤](https://simpleinjector.readthedocs.io/en/latest/lifetimes.html)

–ü—Ä–∏–Ω—Ü–∏–ø—ã SOLID:

- [–ö–Ω–∏–≥–∞ –æ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö SOLID](https://ota-solid.now.sh)
- [–ü—Ä–∏–Ω—Ü–∏–ø –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, SRP](https://ota-solid.now.sh/srp)
- [–ü—Ä–∏–Ω—Ü–∏–ø –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏-–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏, OCP](https://ota-solid.now.sh/ocp)
- [–ó–∞—Ü–µ–ø–ª–µ–Ω–∏–µ –∫–æ–¥–∞](https://ru.wikipedia.org/wiki/–ó–∞—Ü–µ–ø–ª–µ–Ω–∏–µ_%28–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ%29)

–¢–µ—Ä–º–∏–Ω—ã –∏–∑ TypeScript, C#:

- [Type Aliases](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-aliases)
- [–ü–æ–ª—è –∏ —Å–≤–æ–π—Å—Ç–≤–∞ –∫–ª–∞—Å—Å–∞](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/properties)

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

- [createapp.dev](https://createapp.dev)
