---
title: –ü–∏—à–µ–º –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ —Ñ—Ä–∞–∑ –Ω–∞ –∞–∑–±—É–∫—É –ú–æ—Ä–∑–µ
description: –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å Web Audio API –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏.
datetime: 2018-12-21T15:05
tags:
  - composition
  - coupling
  - dependencies
  - javascript
  - music
  - research
---

# –ü–∏—à–µ–º –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ —Ñ—Ä–∞–∑ –Ω–∞ –∞–∑–±—É–∫—É –ú–æ—Ä–∑–µ

–î–ª—è –æ–¥–Ω–æ–≥–æ –∏–∑ –ø—Ä–æ–µ–∫—Ç–æ–≤ –º–Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏–ª–æ—Å—å –ø–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å Web Audio API –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∑–≤—É–∫–æ–≤—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π. –í —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ —è –Ω–∞–ø–∏—Å–∞–ª –Ω–µ–±–æ–ª—å—à–æ–π (–∏ –Ω–µ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã–π) [–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–æ—Ä–∑—è–Ω–∫–∏](https://bespoyasov.ru/showcase/morse/). –í —ç—Ç–æ–º –ø–æ—Å—Ç–µ –ø–æ–∫–∞–∂—É, –∫–∞–∫ –æ–Ω —É—Å—Ç—Ä–æ–µ–Ω.

![–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞-–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞](./morse-code-translator.webp)

## –ê–ª—Ñ–∞–≤–∏—Ç –∏ –º–æ–¥—É–ª—å –ø–µ—Ä–µ–≤–æ–¥–∞

–ü–µ—Ä–≤–æ–µ, —á—Ç–æ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è, ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ –∞–∑–±—É–∫—É –ú–æ—Ä–∑–µ. –û–Ω –Ω–∞–º –±—É–¥–µ—Ç –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã —Ä–∞–∑–±–∏–≤–∞—Ç—å –≤–≤–µ–¥—ë–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ —Å–∏–º–≤–æ–ª—ã –∏ –∑–∞–º–µ–Ω—è—Ç—å –∏—Ö –Ω–∞ —Ç–æ—á–∫–∏ –∏ —Ç–∏—Ä–µ.

<aside>–î–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –º—ã –æ–≥—Ä–∞–Ω–∏—á–∏–º—Å—è —Ç–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–º –∞–ª—Ñ–∞–≤–∏—Ç–æ–º, —Ü–∏—Ñ—Ä–∞–º–∏ –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∑–Ω–∞–∫–∞–º–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è.</aside>

–°–æ–∑–¥–∞–¥–∏–º –æ–±—ä–µ–∫—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º —É–∫–∞–∂–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏ –∏ –∑–Ω–∞–∫–∞–º–∏ –∏–∑ –∞–∑–±—É–∫–∏ –ú–æ—Ä–∑–µ:

```js
const defaultAlphabet = {
	'.-': 'a',
	'-...': 'b',
	'-.-.': 'c',
	'-..': 'd',
	'.': 'e',
	// ...–û—Å—Ç–∞–ª—å–Ω—ã–µ –±—É–∫–≤—ã.

	'-----': '0',
	'.----': '1',
	// ...–û—Å—Ç–∞–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã.

	'¬∑-¬∑-¬∑-': '.',
	'--¬∑¬∑--': ',',
	'-¬∑-¬∑--': '!',
	' ': ' '
};
```

<aside>

–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤, –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —É –º–µ–Ω—è [–≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö](https://github.com/bespoyasov/morse/blob/master/Translator/dictionary.js) –∏–ª–∏ [–Ω–∞ –í–∏–∫–∏–ø–µ–¥–∏–∏](https://ru.wikipedia.org/wiki/–ê–∑–±—É–∫–∞_–ú–æ—Ä–∑–µ).

</aside>

–î–∞–ª–µ–µ —Å–æ–∑–¥–∞–¥–∏–º –º–æ–¥—É–ª—å –ø–µ—Ä–µ–≤–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–æ–≤:

```js
class Translator {
	constructor({ alphabet = defaultAlphabet, space = ' ' }) {
		this.space = space;
		this.alphabet = alphabet;
	}
}
```

–ú—ã –ø–µ—Ä–µ–¥–∞—ë–º –∞–ª—Ñ–∞–≤–∏—Ç –∫–∞–∫ —á–∞—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∫–ª–∞—Å—Å–∞ `Translator`, —á—Ç–æ–±—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –∑–∞–º–µ–Ω–∏—Ç—å. –≠—Ç–æ –Ω–µ —Ç–∞–∫ —É–∂–µ –Ω—É–∂–Ω–æ, –Ω–æ –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –º—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞—Ö–æ—Ç–∏–º –º–µ–Ω—è—Ç—å –∞–ª—Ñ–∞–≤–∏—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ª–æ–∫–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ö—Ä–æ–º–µ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –º—ã —Ç–∞–∫–∂–µ —É–∫–∞–∑—ã–≤–∞–µ–º –∑–Ω–∞–∫ –ø—Ä–æ–±–µ–ª–∞. –ï–≥–æ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–∞–∑–±–∏–µ–Ω–∏—è —Ñ—Ä–∞–∑ –Ω–∞ —Å–ª–æ–≤–∞, –∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ —Å–ª–æ–≤ –æ–±—Ä–∞—Ç–Ω–æ –≤–æ —Ñ—Ä–∞–∑—ã. (–û–± —ç—Ç–æ–º —á—É—Ç—å –¥–∞–ª—å—à–µ.)

–ß—Ç–æ–±—ã –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –≤ –∞–∑–±—É–∫—É –ú–æ—Ä–∑–µ, –º—ã –Ω–∞–ø–∏—à–µ–º –º–µ—Ç–æ–¥ `encode`:

```js
class Translator {
	// ...

	encode = (message) => {
		return message
			.toLowerCase()
			.split('')
			.reduce((encoded, char) => {
				// TODO: –ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Å–∏–º–≤–æ–ª—ã –≤ –º–æ—Ä–∑—è–Ω–∫—É.
			}, '');
	};
}
```

–ú–µ—Ç–æ–¥ `encode` –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å—Ç—Ä–æ–∫—É, —Ä–∞–∑–±–∏–≤–∞—Ç—å –µ—ë –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã, –Ω–∞—Ö–æ–¥–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–º —Å–∏–º–≤–æ–ª—ã –∏–∑ –º–æ—Ä–∑—è–Ω–∫–∏, –∞ –∑–∞—Ç–µ–º —Å–∫–ª–µ–∏–≤–∞—Ç—å –∏—Ö –≤ —Ç–µ–∫—Å—Ç –∏–∑ —Ç–æ—á–µ–∫ –∏ —Ç–∏—Ä–µ.

–ß—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –±—É–∫–≤–æ–π –∏–ª–∏ —Ü–∏—Ñ—Ä–æ–π –∏ —Å–∏–º–≤–æ–ª–æ–º –∏–∑ –∞–∑–±—É–∫–∏ –ú–æ—Ä–∑–µ, –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥—É–±–ª–∏–∫–∞—Ç –∞–ª—Ñ–∞–≤–∏—Ç–∞, –≥–¥–µ –∫–ª—é—á–∞–º–∏ –±—É–¥—É—Ç —Å–∏–º–≤–æ–ª—ã –º–æ—Ä–∑—è–Ω–∫–∏. –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–ø–∏—à–µ–º –º–µ—Ç–æ–¥ `inverse`:

```js
class Translator {
	constructor({ alphabet = defaultAlphabet, space = ' ' }) {
		this.space = space;
		this.alphabet = alphabet;
		this.inverted = this.inverse(alphabet);
	}

	inverse = (alphabet) =>
		Object.keys(alphabet).reduce(
			(inverted, key) => ({
				...inverted,
				[alphabet[key]]: key
			}),
			{}
		);

	// ...
}
```

–ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–ª—Ñ–∞–≤–∏—Ç —Ç–æ–≥–¥–∞ –º—ã —Å–º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –º–µ—Ç–æ–¥–µ `encode`:

```js
class Translator {
	// ...

	encode = (message) => {
		return message
			.toLowerCase()
			.split('')
			.reduce((encoded, char) => {
				// –î–ª—è –∫–∞–∂–¥–æ–π –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏–ª–∏ –∑–Ω–∞–∫–∞ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è
				// –Ω–∞—Ö–æ–¥–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–∏–º–≤–æ–ª –∏–∑ –ú–æ—Ä–∑–µ:
				const code = this.inverted[char] || '';

				// –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–±–µ–ª –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏,
				// —á—Ç–æ–±—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ —Å–ª–∏–ø–∞–ª—Å—è —Å —Å–ø–ª–æ—à–Ω—É—é
				// –º–µ—à–∞–Ω–∏–Ω—É –∏–∑ —Ç–æ—á–µ–∫ –∏ —Ç–∏—Ä–µ:
				const part = code + this.space;

				// –ù–∞—Ä–∞—â–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç-—Ä–µ–∑—É–ª—å—Ç–∞—Ç:
				return (encoded += part);
			}, '');
	};
}
```

–ú—ã —Å—Ç–∞–≤–∏–º –ø—Ä–æ–±–µ–ª –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏ –∞–∑–±—É–∫–∏ –ú–æ—Ä–∑–µ, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ —Å–ª–∏–ø–∞–ª–∏—Å—å –≤ –æ–¥–Ω—É –Ω–µ—Ä–∞–∑–±–æ—Ä—á–∏–≤—É—é —Å—Ç—Ä–æ—á–∫—É. –ú–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏ –º—ã –æ—Å—Ç–∞–≤–ª—è–µ–º –æ–¥–∏–Ω –ø—Ä–æ–±–µ–ª, –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏ ‚Äî –¥–≤–∞.

<aside>

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± –∞–ª–≥–æ—Ä–∏—Ç–º–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –∏ —Ç–æ–º, –∑–∞—á–µ–º –Ω—É–∂–Ω–æ –¥–≤–∞ –ø—Ä–æ–±–µ–ª–∞ –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏, –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å –≤–æ—Ç [–≤ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ](https://www.geeksforgeeks.org/morse-code-translator-python/). –¢–∞–º –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –Ω–∞ Python, –Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ –¥–∞–∂–µ –¥–ª—è –º–µ–Ω—è.

</aside>

–ó–∞–∫–æ–Ω—á–∏–º –º–æ–¥—É–ª—å –ø–µ—Ä–µ–≤–æ–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–º –º–µ—Ç–æ–¥–æ–º –¥–ª—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∞–∑–±—É–∫–∏ –ú–æ—Ä–∑–µ:

```js
class Translator {
	// ...

	decode = (message) => {
		message += this.space;

		let decoded = '';
		let currentCode = '';
		let spaceCount = 0;

		for (const char of message) {
			// –†–∞–∑–±–∏–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã:
			// —Ç–æ—á–∫–∏, —Ç–∏—Ä–µ –∏ –ø—Ä–æ–±–µ–ª—ã
			// –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª.

			// –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–µ–ª, –∑–Ω–∞—á–∏—Ç,
			// –Ω–∞–¥–æ ¬´–¥–æ—Å–ª—É—à–∞—Ç—å¬ª —Å–∏–º–≤–æ–ª –∞–∑–±—É–∫–∏ –¥–æ –∫–æ–Ω—Ü–∞:

			if (char !== this.space) {
				currentCode += char;
				spaceCount = 0;
				continue;
			}

			// –ï—Å–ª–∏ —ç—Ç–æ –±—ã–ª –ø—Ä–æ–±–µ–ª, –ø—Ä–æ–≤–µ—Ä—è–µ–º,
			// —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª–æ–≤ –º—ã –ø–æ—Å–ª—É—à–∞–ª–∏.
			// –ï—Å–ª–∏ –ø—Ä–æ—Å–ª—É—à–∞–Ω–æ 2 –ø—Ä–æ–±–µ–ª–∞,
			// —Ç–æ –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å —Å–ª–æ–≤–æ, –∏ –Ω–∞–¥–æ
			// –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–±–µ–ª –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â—É—é —Å—Ç—Ä–æ–∫—É:

			spaceCount += 1;
			if (spaceCount === 2) {
				decoded += this.space;
				continue;
			}

			// –ï—Å–ª–∏ –±—ã–ª –≤—Å–µ–≥–æ –æ–¥–∏–Ω –ø—Ä–æ–±–µ–ª,
			// —Ç–æ –º—ã –ø—Ä–æ—Å–ª—É—à–∞–ª–∏ —Å–∏–º–≤–æ–ª, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π
			// –±—É–∫–≤–µ, —Ü–∏—Ñ—Ä–µ –∏–ª–∏ –∑–Ω–∞–∫—É –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è.
			// –ù–∞—Ö–æ–¥–∏–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ –∞–ª—Ñ–∞–≤–∏—Ç–µ –∏
			// –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â—É—é —Å—Ç—Ä–æ–∫—É:
			decoded += this.alphabet[currentCode];
			currentCode = '';
		}

		return decoded;
	};
}
```

## –û—Å—Ü–∏–ª–ª—è—Ç–æ—Ä –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–≤—É–∫–∞

–ß—Ç–æ–±—ã –ø–µ—Ä–µ–≤–æ–¥–∏–º—ã–µ —Ñ—Ä–∞–∑—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –Ω–µ —Ç–æ–ª—å–∫–æ –≤–∏–¥–µ—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω–µ, –Ω–æ –∏ –ø–æ—Å–ª—É—à–∞—Ç—å, –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è [Web Audio API](https://developer.mozilla.org/ru/docs/Web/API/Web_Audio_API).

–ù–∞–ø–∏—à–µ–º –º–æ–¥—É–ª—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –∑–≤—É–∫–æ–≤:

```js
class SoundEmitter {
	constructor(config) {
		// ...
	}

	play = (durationMS) => {
		// ...
	};
}
```

–°–ø–µ—Ä–≤–∞ –ø–æ–ª—É—á–∏–º –¥–æ—Å—Ç—É–ø –∫ [–∞—É–¥–∏–æ-–∫–æ–Ω—Ç–µ–∫—Å—Ç—É](https://developer.mozilla.org/ru/docs/Web/API/AudioContext). –ß–µ—Ä–µ–∑ –Ω–µ–≥–æ –º—ã –±—É–¥–µ–º —Å—Ç—É—á–∞—Ç—å—Å—è –≤ –∑–≤—É–∫–æ–≤–æ–µ API:

```js
class SoundEmitter {
	constructor(config = {}) {
		const { glbl = window } = config;

		const AudioContext = glbl.AudioContext || glbl.webkitAudioContext;
		if (!AudioContext) throw new Error('Failed to access Audio Context.');

		this.audioCtx = new AudioContext();
	}

	// ...
}
```

–ù–∞—Å—Ç—Ä–æ–∏–º —á–∞—Å—Ç–æ—Ç—É –∑–≤—É–∫–æ–≤–æ–π –≤–æ–ª–Ω—ã, –∫–æ—Ç–æ—Ä—É—é —Å–æ–±–∏—Ä–∞–µ–º—Å—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å. –û–±—ã—á–Ω–æ –∞–∑–±—É–∫–∞ –ú–æ—Ä–∑–µ [–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –Ω–∞ —á–∞—Å—Ç–æ—Ç–µ 600‚Äì1000 –ì—Ü](https://ru.wikipedia.org/wiki/–ê–∑–±—É–∫–∞_–ú–æ—Ä–∑–µ). –≠—Ç—É —á–∞—Å—Ç–æ—Ç—É –∏ —É–∫–∞–∂–µ–º –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:

```js
class SoundEmitter {
	constructor(config = {}) {
		const { glbl = window, frequencyHZ = 600 } = config;

		// ...

		this.frequencyHZ = frequencyHZ;
	}

	// ...
}
```

–î–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–≤—É–∫–∞ —Å Web Audio API –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è [–æ—Å—Ü–∏–ª–ª—è—Ç–æ—Ä](https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode) ‚Äî —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –≤–æ–ª–Ω—ã –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —á–∞—Å—Ç–æ—Ç—ã. –î–æ–±–∞–≤–∏–º –º–µ—Ç–æ–¥ –¥–ª—è –µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è:

```js
class SoundEmitter {
	// ...

	createOscillator = () => {
		const oscillator = this.audioCtx.createOscillator();
		oscillator.frequency.value = this.frequencyHZ;
		oscillator.connect(this.audioCtx.destination);

		return oscillator;
	};
}
```

–ù–∞–∫–æ–Ω–µ—Ü —Å–æ–∑–¥–∞–¥–∏–º –º–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è –∑–≤—É–∫–æ–≤–æ–π –≤–æ–ª–Ω—ã, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–∞ –≤—Ö–æ–¥ –µ—ë –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö:

```js
class SoundEmitter {
	// ...

	play = (durationMS) => {
		const oscillator = this.createOscillator();
		oscillator.start();
		oscillator.stop(this.audioCtx.currentTime + durationMS / 1000);
	};
}
```

<aside>

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º [`AudioContext.currentTime`](https://developer.mozilla.org/ru/docs/Web/API/BaseAudioContext/currentTime).

</aside>

## –ü—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—å —Ñ—Ä–∞–∑

–ü–æ—Å–ª–µ–¥–Ω–µ–µ, —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å, ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞ –ø–æ —Ç–æ—á–∫–∞–º –∏ —Ç–∏—Ä–µ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è.

–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–æ—á–∫–∏ [–æ–±—ã—á–Ω–æ —Ä–∞–≤–Ω–∞ 50 –º—Å](https://ru.wikipedia.org/wiki/–ê–∑–±—É–∫–∞_–ú–æ—Ä–∑–µ), –∞ —Ç–∏—Ä–µ –ø–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–≤–Ω–æ 3 —Ç–æ—á–∫–∞–º. –ü—Ä–æ–±–µ–ª –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏ —Å–¥–µ–ª–∞–µ–º –ø–∞—É–∑–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –≤ 5 —Ç–æ—á–µ–∫, –∞ –ø—Ä–æ–±–µ–ª –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏ ‚Äî –ø–∞—É–∑–æ–π –≤ 3. –í–Ω—É—Ç—Ä–∏ —Å–∏–º–≤–æ–ª–∞ —Ç–æ—á–∫–∏ –∏ —Ç–∏—Ä–µ –æ—Ç–¥–µ–ª–∏–º –ø–∞—É–∑–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –≤ –æ–¥–Ω—É —Ç–æ—á–∫—É.

```js
class MorseCodePlayer {
	constructor({ translator, soundEmitter, dotLengthMS = 50 }) {
		this.isPlaying = false;
		this.translator = translator;
		this.soundEmitter = soundEmitter;

		this.durations = {
			dot: dotLengthMS,
			dash: 3 * dotLengthMS
		};

		this.gaps = {
			part: dotLengthMS,
			char: 3 * dotLengthMS,
			word: 5 * dotLengthMS
		};
	}
}
```

–í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –º—ã –ø–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤: `translator` –∏ `soundEmitter`. –≠—Ç–æ —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º–æ–µ [–≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](/blog/di-ts-in-practice/). –° –µ–≥–æ –ø–æ–º–æ—â—å—é –º—ã –Ω–µ –ø—Ä–∏—Ü–µ–ø–ª—è–µ–º—Å—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∏ –∑–∞—Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º, –∞ –¥–µ–ª–∞–µ–º —ç—Ç—É —Å–≤—è–∑—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π.

<aside>

–° –µ–≥–æ –ø–æ–º–æ—â—å—é, –Ω–∞–ø—Ä–∏–º–µ—Ä, —É–¥–æ–±–Ω–æ –¥–µ–ª–∞—Ç—å –∫–ª–∞—Å—Å—ã –±–æ–ª–µ–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ —Ç–µ—Å—Ç–∞—Ö –º–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ [—Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã](https://ru.wikipedia.org/wiki/Mock-–æ–±—ä–µ–∫—Ç).

</aside>

–î–∞–ª–µ–µ –¥–æ–±–∞–≤–∏–º –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –ø–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º —Å—Ç—Ä–æ–∫–∞–º:

```js
class MorseCodePlayer {
	// ...

	getSignalDuration = (smbl) => {
		const { dot, dash } = this.durations;

		switch (smbl) {
			case '.':
				return dot;
			case '-':
				return dash;
			default:
				return 0;
		}
	};

	getGapDuration = (smbl) => {
		const { word, char, part } = this.gaps;

		switch (smbl) {
			case '  ':
				return word;
			case ' ':
				return char;
			default:
				return part;
		}
	};
}
```

–ß—Ç–æ–±—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–º–≤–æ–ª–æ–≤ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º [–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AsyncGenerator). –ö–æ–≥–¥–∞ –º—ã –±—É–¥–µ–º –ø–æ –Ω–µ–º—É –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –æ–Ω –±—É–¥–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å ¬´—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º¬ª –ø–∞—É–∑ –∏ –∑–≤—É–∫–æ–≤, –æ—Ç–∫–ª–∞–¥—ã–≤–∞—è –∏—Ö —Å –ø–æ–º–æ—â—å—é —Ç–∞–π–º–µ—Ä–∞:

```js
class MorseCodePlayer {
	// ...

	*generateSequence(symbols) {
		for (const smbl of symbols) {
			const signal = this.getSignalDuration(smbl);
			const gap = this.getGapDuration(smbl);

			yield Promise.resolve({ signal });
			yield new Promise((resolve) => setTimeout(() => resolve({ gap }), signal + gap));
		}
	}
}
```

–¢–µ–ø–µ—Ä—å –æ—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞–ø–∏—Å–∞—Ç—å –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–æ–ª–Ω—ã –æ—Å—Ü–∏–ª–ª—è—Ç–æ—Ä–∞ –ø–æ —ç—Ç–æ–º—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é:

```js
class MorseCodePlayer {
	// ...

	togglePlayingState = () => {
		this.isPlaying = !this.isPlaying;
	};

	playMessage = async (message) => {
		// –ó–∞–ø—Ä–µ—â–∞–µ–º ¬´–ø–µ—Ä–µ–±–∏–≤–∞—Ç—å¬ª –∏–≥—Ä–∞—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:

		if (this.isPlaying) return false;
		this.togglePlayingState();

		// –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∞–∑–±—É–∫—É –ú–æ—Ä–∑–µ:

		const morseString = this.translator.encode(message);
		const symbols = morseString.split('');

		// –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –∫–∞–∂–¥–æ–º—É —Å–∏–º–≤–æ–ª—É –∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ–º
		// ¬´—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ¬ª –¥–ª—è –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è –∑–≤—É–∫–æ–≤:

		for await (const bit of this.generateSequence(symbols)) {
			const { signal } = bit;

			// –ï—Å–ª–∏ –≤ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
			// –º—ã –≤–∏–¥–∏–º ¬´—Å–∏–≥–Ω–∞–ª¬ª, —Ç–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –µ–≥–æ.
			if (signal) this.soundEmitter.play(signal);

			// –ï—Å–ª–∏ –≤–º–µ—Å—Ç–æ —Å–∏–≥–Ω–∞–ª–∞ –º—ã –≤–∏–¥–∏–º –ø–∞—É–∑—É,
			// –Ω–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –Ω–∏—á–µ–≥–æ, –ø—Ä–æ—Å—Ç–æ –∂–¥—ë–º
			// —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é —Å–∏–≥–Ω–∞–ª–∞.
		}

		// –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—è,
		// —á—Ç–æ –æ–Ω –∑–∞–Ω—è—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è:
		this.togglePlayingState();
	};
}
```

## –í—Å—ë –≤–º–µ—Å—Ç–µ

–ü–æ—Å–ª–µ–¥–Ω–µ–µ, —á—Ç–æ –Ω–∞–º –Ω–∞–¥–æ —Å–¥–µ–ª–∞—Ç—å, ‚Äî —Å–∫–æ–º–ø–æ–Ω–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```js
// –°–æ–∑–¥–∞–¥–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –∑–≤—É–∫–æ–≤:
const translator = new Translator();
const soundEmitter = new SoundEmitter();

// –°–æ–∑–¥–∞–¥–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
// –∏ –ø–µ—Ä–µ–¥–∞–¥–∏–º –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ:
const codePlayer = new MorseCodePlayer({
	soundEmitter,
	translator
});
```

–î–∞–ª–µ–µ –Ω–∞—Å—Ç—Ä–æ–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∑–≤—É–∫–∞, –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤ –Ω—ë–º `codePlayer`:

```js
const form = document.getElementById('form');
const input = document.getElementById('message');
const output = document.getElementById('translated');

form.addEventListener('submit', (e) => {
	e.preventDefault();

	const message = input.value;
	codePlayer.playMessage(message);

	const encoded = translator.encode(message);
	output.innerHTML = encoded;
});
```

[–ì–æ—Ç–æ–≤–æ!](https://bespoyasov.ru/showcase/morse/) üôÉ

## –°—Å—ã–ª–∫–∏ –∏ —Ä–µ—Å—É—Ä—Å—ã

- [–ì–æ—Ç–æ–≤—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä](https://bespoyasov.ru/showcase/morse/)
- [–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –Ω–∞ –ì–∏—Ç—Ö–∞–±–µ](https://github.com/bespoyasov/morse)

### –ê–∑–±—É–∫–∞ –ú–æ—Ä–∑–µ

- [Morse code, Wikipedia](https://ru.wikipedia.org/wiki/–ê–∑–±—É–∫–∞_–ú–æ—Ä–∑–µ)
- [Morse Code Translator In Python](https://www.geeksforgeeks.org/morse-code-translator-python/)

### Web Audio API

- [Web Audio API](https://developer.mozilla.org/ru/docs/Web/API/Web_Audio_API)
- [AudioContext](https://developer.mozilla.org/ru/docs/Web/API/AudioContext)
- [OscillatorNode](https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode)
- [`currentTime`](https://developer.mozilla.org/ru/docs/Web/API/BaseAudioContext/currentTime)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

- [–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](/blog/di-ts-in-practice/)
- [–§–∏–∫–∏—Ç–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã](https://ru.wikipedia.org/wiki/Mock-–æ–±—ä–µ–∫—Ç)

### –û—Å—Ç–∞–ª—å–Ω–æ–µ

- [–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AsyncGenerator)
