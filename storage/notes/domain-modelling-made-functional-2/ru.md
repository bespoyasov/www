---
title: –î–æ–º–µ–Ω–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ. –ß–∞—Å—Ç—å 2
description: –í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å –∫–æ–Ω—Å–ø–µ–∫—Ç–∞ –∫–Ω–∏–≥–∏ ‚ÄúDomain Modelling Made Functional‚Äù —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –Ω–∞ TypeScript.
datetime: 2022-01-11T12:05
cover: cover.webp
tags:
  - books
  - communication
  - composition
  - documentation
  - domain
  - fp
  - fsharp
  - immutability
  - management
  - modelling
  - patterns
  - typescript
---

# –î–æ–º–µ–Ω–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ. –ß–∞—Å—Ç—å 2

[–í –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑](/blog/domain-modelling-made-functional) –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–ª–∏ –æ –ø–µ—Ä–≤–æ–π —á–∞—Å—Ç–∏ –∫–Ω–∏–≥–∏. –û–±—Å—É–¥–∏–ª–∏, —á—Ç–æ —Ç–∞–∫–æ–µ –¥–æ–º–µ–Ω, –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω –∏ –∫–∞–∫ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ä–æ–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ –¥–æ–º–µ–Ω—ã –Ω–∞ –Ω–µ–±–æ–ª—å—à–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.

–í–æ —ç—Ç–æ—Ç —Ä–∞–∑ –º—ã —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º –æ–¥–∏–Ω –∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é –¥–æ–º–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –∏ —É–∑–Ω–∞–µ–º, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–ø—ã, —á—Ç–æ–±—ã –æ—Ç—Ä–∞–∑–∏—Ç—å –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. –ö –∫–æ–Ω—Ü—É –≥–ª–∞–≤—ã –º—ã –Ω–∞–ø–∏—à–µ–º –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±—É–¥–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –∏ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º–æ–π –æ—Å–Ω–æ–≤–æ–π –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã.

## –ì–ª–∞–≤–∞ 4. –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–∏–ø–æ–≤

–í —ç—Ç–æ–π –≥–ª–∞–≤–µ –º—ã –ø–æ–ø—Ä–æ–±—É–µ–º –æ—Ç—Ä–∞–∑–∏—Ç—å –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤. –£–∑–Ω–∞–µ–º, —á—Ç–æ —Ç–∞–∫–æ–µ —Ç–∏–ø—ã, –∫–∞–∫ –∏—Ö –æ–±—ä—è–≤–ª—è—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∞ —Ç–∞–∫–∂–µ ‚Äî –∫–∞–∫ –æ–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –¥–æ–º–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å.

### –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

–£ –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –µ—ë –ø–æ–≤–µ–¥–µ–Ω–∏—è –≤ –≤–∏–¥–µ —Ç–∏–ø–æ–≤. –í –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ —Å–ª—É—á–∞–µ–≤ F# —Å–º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø—ã —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä:

```fsharp
let add1 x = x + 1   // –°–∏–≥–Ω–∞—Ç—É—Ä–∞: int -> int
let add x y = x + y  // –°–∏–≥–Ω–∞—Ç—É—Ä–∞: int -> int -> int
```

<aside>

–í F# –Ω–µ –Ω—É–∂–µ–Ω `return`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏.

</aside>

–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏, —Ç–æ –æ–Ω–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è [–¥–∂–µ–Ω–µ—Ä–∏–∫–æ–º (generic function)](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/generics/). –î–∂–µ–Ω–µ—Ä–∏–∫-—Ç–∏–ø—ã –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –≤ –∫–∞–≤—ã—á–∫–∏:

```fsharp
// areEqual : 'a -> 'a -> bool
let areEqual x y =
  (x = y)
```

<aside>

–í F# –≤—Å—ë –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ, –ø–æ—ç—Ç–æ–º—É `=` ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ, –∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ. –î–ª—è –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `<-`.

</aside>

–í TypeScript —ç—Ç–æ –±—ã –≤—ã–≥–ª—è–¥–µ–ª–æ —Ç–∞–∫:

```ts
function areEqual<T>(a: T, b: T): boolean {
	return a === b;
}
```

### –¢–∏–ø—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏

_–¢–∏–ø_ ‚Äî —ç—Ç–æ –∏–º—è –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

```
Set of                              Set of
valid      ‚Üí     Function     ‚Üí     valid
inputs                              outputs
```

–ú—ã –º–æ–∂–µ–º –æ–±–æ–∑–Ω–∞—á–∏—Ç—å —Ç–∞–∫–æ–π —Ç–∏–ø –∫–∞–∫ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫ –≤—ã—Ö–æ–¥–Ω—ã–º:

```
input -> output
```

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —á–∏—Å–ª–æ –æ—Ç `-32768` –¥–æ `32767`, —Ç–æ –æ–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —Ç–∏–ø int16. –ê –µ—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞–∫—É—é-—Ç–æ —Å—Ç—Ä–æ–∫—É, –∫–∞–∫ –Ω–∞–ø—Ä–∏–º–µ—Ä, `"abc"`, `"cool"`, —Ç–æ –æ–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç string. –ú—ã –º–æ–∂–µ–º –∑–∞–ø–∏—Å–∞—Ç—å —Ç–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏ –µ—ë —Å–∏–≥–Ω–∞—Ç—É—Ä—É —Ç–∞–∫:

```
Inputs                    Function                Outputs
-32768, -32767,                                   "abc"
‚Ä¶, -1, 0, 1, ‚Ä¶,     ‚Üí     int -> string     ‚Üí     "cool"
32766, 32767                                      "something"
```

–¢–∏–ø—ã –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–∏–º–∏—Ç–∏–≤—ã. –û–Ω–∏ –º–æ–≥—É—Ç –æ—Ç—Ä–∞–∂–∞—Ç—å –∏ ¬´—Å–ª–æ–∂–Ω—ã–µ –≤–µ—â–∏¬ª:

```
Inputs             Function                  Outputs
üòä üòÉ üòÑ     ‚Üí     Person -> Fruit     ‚Üí     üçâ üçé üçå
```

–§—É–Ω–∫—Ü–∏–∏ ‚Äî —Ç–æ–∂–µ ¬´–≤–µ—â–∏¬ª, –ø–æ—ç—Ç–æ–º—É –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞–±–æ—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π, –∫–∞–∫ —Ç–∏–ø—ã —Ç–æ–∂–µ! –í —Å–∏–≥–Ω–∞—Ç—É—Ä–µ —Ç–∞–∫–æ–π —Ç–∏–ø –±—É–¥–µ—Ç –∑–∞–∫–ª—é—á—ë–Ω –≤ —Å–∫–æ–±–∫–∏:

```
Inputs            Function                              Outputs
"abc"                                                   üòä ‚Üí üçâ
"cool"      ‚Üí     string -> (Person -> Fruit)     ‚Üí     üòÉ ‚Üí üçé
"yeah"                                                  üòÑ ‚Üí üçå
```

–ó–Ω–∞—á–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç –∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –§–ü –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã –∏ —É –Ω–∏—Ö –Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö ¬´–º–µ—Ç–æ–¥–æ–≤¬ª, –∫–æ—Ç–æ—Ä—ã–µ –±—ã —á—Ç–æ-—Ç–æ –¥–µ–ª–∞–ª–∏. –ó–Ω–∞—á–µ–Ω–∏—è ‚Äî —ç—Ç–æ _—Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ_.

### –ö–æ–º–ø–æ–∑–∏—Ü–∏—è —Ç–∏–ø–æ–≤

–ö–æ–º–ø–æ–∑–∏—Ü–∏—è ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ–≥–æ-—Ç–æ –∏–∑ —á–µ–≥–æ-—Ç–æ –ø–æ–º–µ–Ω—å—à–µ. –û–Ω–∞ –ø—Ä–∏–º–µ–Ω–∏–º–∞ –∏ –∫ —Ç–∏–ø–∞–º —Ç–æ–∂–µ. –¢–∏–ø—ã –º–æ–∂–Ω–æ –∫–æ–º–ø–æ–Ω–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ ¬´–ò¬ª –∏ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ ¬´–ò–õ–ò¬ª.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –º—ã –æ–ø–∏—Å—ã–≤–∞–µ–º —Ç–∏–ø –¥–ª—è —Ñ—Ä—É–∫—Ç–æ–≤–æ–≥–æ —Å–∞–ª–∞—Ç–∞, –≥–¥–µ –Ω–∞–º –Ω—É–∂–Ω—ã –±–∞–Ω–∞–Ω—ã, —è–±–ª–æ–∫–∏ **–∏** –≤–∏—à–Ω–∏, —Ç–æ –º—ã –Ω–∞–ø–∏—à–µ–º [_—Ä–µ–∫–æ—Ä–¥-—Ç–∏–ø (record type)_](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/records):

<Switch options="fsharp,ts">

```fsharp
type FruitSalad = {
  Apple: AppleVariety
  Banana: BananaVariety
  Cherries: CherryVariety
}
```

```ts
type FruitSalad = {
	apple: AppleVariety;
	banana: BananaVariety;
	cherries: CherryVariety;
};
```

</Switch>

–ê –µ—Å–ª–∏ –º—ã –æ–ø–∏—Å—ã–≤–∞–µ–º –∑–∞–∫—É—Å–∫—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —è–±–ª–æ–∫–æ, –±–∞–Ω–∞–Ω **–∏–ª–∏** –≤–∏—à–Ω—é, —Ç–æ –æ–ø–∏—à–µ–º –µ–≥–æ –∫–∞–∫ [_—é–Ω–∏–æ–Ω-—Ç–∏–ø (discriminated union)_](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/discriminated-unions):

<Switch options="fsharp,ts">

```fsharp
type FruitSnack =
  | Apple of AppleVariety
  | Banana of BananaVariety
  | Cherries of CherryVariety
```

```ts
type FruitSnack = AppleVariety | BananaVariety | CherryVariety;
```

</Switch>

–≠—Ç–æ –∏ –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–µ–π—à–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Ç–∏–ø–æ–≤. –°–∏—Å—Ç–µ–º–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π —Å–ª–æ–∂–Ω—ã–µ —Ç–∏–ø—ã —Å–ª–æ–∂–µ–Ω—ã –∏–∑ –ø—Ä–æ—Å—Ç—ã—Ö —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ü–∏–π –ò –∏ –ò–õ–ò –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è [_–∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–æ–π —Ç–∏–ø–æ–≤_](https://en.wikipedia.org/wiki/Algebraic_data_type).

### –°—Ç—Ä–æ–∏–º –¥–æ–º–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å —Å –ø–æ–º–æ—â—å—é –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ —Ç–∏–ø–æ–≤

–ö–æ–º–ø–æ–∑–∏—Ü–∏—è —Ç–∏–ø–æ–≤ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –ø—Ä–∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–∏—Å—Ç–µ–º. –î–æ–ø—É—Å—Ç–∏–º, –º—ã —Ö–æ—Ç–∏–º —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –æ–ø–ª–∞—Ç—É –ø–ª–∞—Ç–µ–∂–µ–π –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–µ. –ù–∞—á–Ω—ë–º —Å –æ–±—ë—Ä—Ç–æ–∫ –Ω–∞–¥ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏:

<Switch options="fsharp,ts">

```fsharp
type CheckNumber = CheckNumber of int
type CardNumber = CardNumber of string
```

```ts
type CheckNumber = number;
type CardNumber = string;
```

</Switch>

<aside>

–í F# `of` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –æ–±—ë—Ä—Ç–∫—É –Ω–∞–¥ —Ç–∏–ø–æ–º, —Ç–∞–∫ —á—Ç–æ –¥–≤–µ –æ–±—ë—Ä—Ç–∫–∏ –Ω–∞–¥ `int` –±—É–¥—É—Ç —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏. –í TypeScript —ç—Ç–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –º–æ–∂–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é [–±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏—è](https://github.com/kourge/ts-brand)), –Ω–æ —è —Ä–µ—à–∏–ª –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å —ç—Ç–∏–º –∫–æ–Ω—Å–ø–µ–∫—Ç –∏ –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–∑–¥–µ [–∞–ª–∏–∞—Å—ã](https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-aliases). –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ —Ç–∞–∫ —Å—Ç—Ä–æ–≥–æ, –Ω–æ –ø–æ–Ω—è—Ç—å —Å—É—Ç—å –∫–Ω–∏–≥–∏ –Ω–µ –ø–æ–º–µ—à–∞–µ—Ç.

</aside>

–ó–∞—Ç–µ–º —Ä–∞—Å–ø–∏—à–µ–º –≤ –≤–∏–¥–µ —é–Ω–∏–æ–Ω–∞ –≤–∏–¥—ã –ø—Ä–∏–Ω–∏–º–∞–µ–º—ã—Ö –∫–∞—Ä—Ç, –∞ –≤ –≤–∏–¥–µ —Ä–µ–∫–æ—Ä–¥–∞ ‚Äî –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞—Ä—Ç–µ:

<Switch options="fsharp,ts">

```fsharp
type CardType = Visa | Mastercard
type CreditCardInfo = {
  CardType: CardType
  CardNumber: CardNumber
}
```

```ts
type CardType = Visa | Mastercard;
type CreditCardInfo = {
	cardType: CardType;
	cardNumber: CardNumber;
};
```

</Switch>

–ï—Å–ª–∏ –º–∞–≥–∞–∑–∏–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –æ–ø–ª–∞—Ç—ã, —Ç–æ –º—ã —Å–Ω–æ–≤–∞ –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —é–Ω–∏–æ–Ω:

<Switch options="fsharp,ts">

```fsharp
type PaymentMethod =
  | Cash
  | Check of CheckNumber
  | Card of CreditCardInfo
```

```ts
type PaymentMethod = Cash | CheckNumber | CreditCardInfo;
```

</Switch>

–°—É–º–º—É –∏ –≤–∞–ª—é—Ç—É —Ç–æ–∂–µ –º–æ–∂–µ–º –æ–ø–∏—Å–∞—Ç—å –±–∞–∑–æ–≤—ã–º–∏ —Ç–∏–ø–∞–º–∏:

<Switch options="fsharp,ts">

```fsharp
type PaymentAmount = PaymentAmount of decimal
type Currency = EUR | USD
```

```ts
type PaymentAmount = number;
type Currency = EUR | USD;
```

</Switch>

–ù—É –∞ —Ç–∏–ø –æ–ø–ª–∞—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

<Switch options="fsharp,ts">

```fsharp
type Payment = {
  Amount: PaymentAmount
  Currency: Currency
  Method: PaymentMethod
}
```

```ts
type Payment = {
	amount: PaymentAmount;
	currency: Currency;
	method: PaymentMethod;
};
```

</Switch>

–ë–æ–ª–µ–µ —Ç–æ–≥–æ –º—ã –º–æ–∂–µ–º –æ–ø–∏—Å–∞—Ç—å –∏ —Ç–æ, –∫–∞–∫ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –æ–ø–ª–∞—Ç–∞ –∏–ª–∏ –∫–∞–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª—é—Ç—ã ‚Äî –≤ –≤–∏–¥–µ —Ç–∏–ø–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π:

<Switch options="fsharp,ts">

```fsharp
type PayInvoice = UnpaidInvoice -> Payment -> PaidInvoice
type ConvertPaymentCurrency = Payment -> Currency -> Payment
```

```ts
type PayInvoice = (invoice: UnpaidInvoice, payment: Payment) => PaidInvoice;
type ConvertPaymentCurrency = (payment: Payment, currency: Currency) => Payment;

// –ü—Ä–∏—Ç–≤–æ—Ä–∏–º—Å—è, —á—Ç–æ –Ω–∞—à –∫–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–º–µ–µ—Ç –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞–∫ –∫–∞—Ä—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ.
// –¢–æ–≥–¥–∞ –º—ã —Å–º–æ–∂–µ–º –∑–∞–ø–∏—Å–∞—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —á—É—Ç—å –±–ª–∏–∂–µ –∫ F#:
type PayInvoice = (invoice: UnpaidInvoice) => (payment: Payment) => PaidInvoice;
type ConvertCurrency = (payment: Payment) => (currency: Currency) => Payment;

// –î–∞–ª–µ–µ —è –±—É–¥—É –ø—Ä–∏–≤–æ–¥–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –Ω–∞ TS –∏–º–µ–Ω–Ω–æ —Ç–∞–∫.
// –í F# –∂–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞—Ä—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ç–∞–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ,
// —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
```

</Switch>

<aside>

–ó–∞–±–∞–≤–Ω–æ, —á—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º –∂–µ —Å–ø–æ—Å–æ–±–æ–º —è –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª –º–∞–≥–∞–∑–∏–Ω –≤ —Å–≤–æ—ë–º [–¥–æ–∫–ª–∞–¥–µ –∏ –ø–æ—Å—Ç–µ –æ ¬´–ß–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ¬ª](/blog/clean-architecture-on-frontend/) –µ—â—ë –¥–æ –ø—Ä–æ—á—Ç–µ–Ω–∏—è –∫–Ω–∏–≥–∏. –¢—É—Ç –≤ —Ü–µ–ª–æ–º —Ä–∞–∑–≥–æ–≤–æ—Ä –æ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–∫–æ–π ¬´–º–µ—Ç–∞-–ø—Ä–æ–≥—Ä–∞–º–º—ã¬ª, –∫–æ—Ç–æ—Ä–∞—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–º–µ—Ç–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤ —Ç–∏–ø–∞—Ö. –ú–Ω–µ —ç—Ç–æ –ø—Ä–∏–≥–æ–∂–¥–∞–µ—Ç—Å—è –µ—â—ë —Å–æ –≤—Ä–µ–º—ë–Ω [–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –¢—è–∂–µ–ª–æ–≤–∞—Ç–æ –Ω–∞ TypeScript](/blog/tzlvt-architecture-upgrade).

</aside>

### –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –æ—à–∏–±–æ–∫ –∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ F# –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Option<'a>`, –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—à–∏–±–∫–∞–º–∏ ‚Äî `Result<'Success,'Failure>`, –≤–º–µ—Å—Ç–æ `void` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `unit`, –∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤. –î–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–π –∞–≤—Ç–æ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `list` –ø—Ä–∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–∏. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è, –Ω–æ –≤ –º–æ–¥–µ–ª–∏ –ø—Ä–æ—â–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ –µ–≥–æ.

–û —Ç–æ–Ω–∫–æ—Å—Ç—è—Ö F# –ª—É—á—à–µ –ø—Ä–æ—á–µ—Å—Ç—å –Ω–∞–ø—Ä—è–º—É—é [–≤ –∫–Ω–∏–≥–µ](https://pragprog.com/titles/swdddf/domain-modeling-made-functional/) –∏–ª–∏ [–≤ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –ø–æ —è–∑—ã–∫—É](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/).

## –ì–ª–∞–≤–∞ 5. –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–º–µ–Ω–∞ –≤ —Ç–∏–ø–∞—Ö

–í —ç—Ç–æ–π –≥–ª–∞–≤–µ –º—ã —Å–æ—Å—Ç—Ä—è–ø–∞–µ–º –¥–æ–º–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å, –∏—Å–ø–æ–ª—å–∑—É—è —Å–∏—Å—Ç–µ–º—É —Ç–∏–ø–æ–≤ —Ç–∞–∫, —á—Ç–æ –µ—ë —Å–º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ ¬´–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã –Ω–∞ —Ñ–∞—Ä—à–µ¬ª, –Ω–æ –∏ –¥–æ–º–µ–Ω–Ω—ã–µ —ç–∫—Å–ø–µ—Ä—Ç—ã.

### –ó–∞–º–µ—á–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ –º–æ–¥–µ–ª–∏

–ö–∞–∂–¥–∞—è –æ–±–ª–∞—Å—Ç—å –∑–Ω–∞–Ω–∏–π —É–Ω–∏–∫–∞–ª—å–Ω–∞, –Ω–æ –∫–æ–µ-—á—Ç–æ –≤—Å—ë –∂–µ –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è –æ—Ç –ø—Ä–æ–µ–∫—Ç–∞ –∫ –ø—Ä–æ–µ–∫—Ç—É. –ù–∞–ø—Ä–∏–º–µ—Ä:

- –ü—Ä–æ—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –±–ª–æ–∫–∏, —á–∞—â–µ –≤—Å–µ–≥–æ –±—É–¥—É—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–∞–∫ –ø—Ä–∏–º–∏—Ç–∏–≤—ã –≤ –æ–±—ë—Ä—Ç–∫–∞—Ö;
- –ì—Ä—É–ø–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π, –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ ¬´–ò¬ª ‚Äî –≤ –Ω–∏—Ö –¥–∞–Ω–Ω—ã–µ _—Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω—ã_ –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º;
- –ì—Ä—É–ø–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π, –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ ¬´–ò–õ–ò¬ª ‚Äî –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –∫–∞–∫–æ–π-—Ç–æ _–≤—ã–±–æ—Ä_;
- –ü—Ä–æ—Ü–µ—Å—Å—ã ‚Äî —Ç–∏–ø—ã —Å –≤—Ö–æ–¥–Ω—ã–º–∏ –∏ –≤—ã—Ö–æ–¥–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

### –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

–≠–∫—Å–ø–µ—Ä—Ç—ã –Ω–µ –¥—É–º–∞—é—Ç –æ –ø—Ä–æ—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö, –∫–∞–∫ –æ ¬´—Å—Ç—Ä–æ–∫–∞—Ö¬ª –∏–ª–∏ ¬´—á–∏—Å–ª–∞—Ö¬ª. –û–Ω–∏ –¥—É–º–∞—é—Ç –æ ¬´–∫–æ–¥–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤¬ª, ¬´–∫–æ–ª–∏—á–µ—Å—Ç–≤–µ¬ª –∏ ¬´—Ü–µ–Ω–∞—Ö¬ª. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–≤–µ –≤–µ—â–∏:

- –≤ –¥–æ–º–µ–Ω–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç –∫–∞–∫-—Ç–æ _–æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã_ (—É —á–∏—Å–µ–ª –±—É–¥—É—Ç –≤–∞–ª–∏–¥–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏–π, —É —Å—Ç—Ä–æ–∫ ‚Äî —Ñ–æ—Ä–º–∞—Ç –∏ —Ç. –¥.)
- —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π _–Ω–µ –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã_ ‚Äî int –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ç–æ–≤–∞—Ä–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç int –≤ –∫–æ–¥–µ —Ç–æ–≤–∞—Ä–∞.

–í F# –µ—Å—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±—ä—è–≤–∏—Ç—å —Ç–∞–∫–∏–µ —Ç–∏–ø—ã, —á—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ —Ä–∞–∑–Ω—ã–º–∏:

```fsharp
type CustomerId = CustomerId of int
type OrderId = OrderId of int
```

–¢–æ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞—Ç—å `OrderId` –≤ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –æ–∂–∏–¥–∞–µ—Ç `CustomerId`, –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è:

```fsharp
let processCustomerId (id:CustomerId) = ...

// –ï—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å —Å OrderId –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞:
processCustomerId orderId
//                ^ This expression was expected to have type
//                'CustomerId' but here has type 'OrderId'
```

–í –∫–æ–Ω—Å–ø–µ–∫—Ç–µ –≤ –∫–æ–¥–µ –Ω–∞ TypeScript –º—ã –Ω–µ –±—É–¥–µ–º –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —ç—Ç–æ—Ç –Ω—é–∞–Ω—Å. –ö–∞–∫ —è –≥–æ–≤–æ—Ä–∏–ª –≤—ã—à–µ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –¥–æ–±–∏—Ç—å—Å—è —Ç–∞–∫–æ–≥–æ –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. –ú—ã –∂–µ –ø—Ä–æ—Å—Ç–æ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª–∏–∞—Å—ã, —á—Ç–æ–±—ã –∫–æ–¥ –±—ã–ª –ø—Ä–æ—â–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è.

<aside>

–í F#, –∫—Å—Ç–∞—Ç–∏, —Ç–æ–∂–µ [–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª–∏–∞—Å—ã](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/type-abbreviations), –Ω–æ —Ç–∞–º —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é. –ë–æ–ª—å—à–µ —Å–ø–æ—Å–æ–±–æ–≤ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Äî –≤ –∫–Ω–∏–≥–µ.

</aside>

### –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

–ß–∞—Å—Ç—å _—Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö_ –º—ã –º–æ–∂–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –≤ –≤–∏–¥–µ —Ä–µ–∫–æ—Ä–¥-—Ç–∏–ø–æ–≤:

<Switch options="fsharp,ts">

```fsharp
type Order = {
  CustomerInfo : CustomerInfo
  ShippingAddress : ShippingAddress
  BillingAddress : BillingAddress
  OrderLines : OrderLine list
  AmountToBill : // ...
}
```

```ts
type Order = {
  customerInfo: CustomerInfo;
  shippingAddress: ShippingAddress;
  billingAddress: BillingAddress;
  orderLines: OrderLine[];
  amountToBill: // ...
};
```

</Switch>

–ù–∞ –ø–µ—Ä–≤—ã—Ö —ç—Ç–∞–ø–∞—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–∏–µ –∏–∑ —Ç–∏–ø–æ–≤ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ, –∞ –∫–∞–∫–∏–µ ‚Äî –Ω–µ—Ç. –≠—Ç–æ —Å—Ç–æ–∏—Ç —É—Ç–æ—á–Ω–∏—Ç—å —É —ç–∫—Å–ø–µ—Ä—Ç–æ–≤. –ï—Å–ª–∏ –æ–Ω–∏ –≥–æ–≤–æ—Ä—è—Ç –æ `ShippingAddress` –∏ `BillingAddress` –∫–∞–∫ –æ —Ä–∞–∑–Ω—ã—Ö –≤–µ—â–∞—Ö, —Ç–æ –ª—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –∏—Ö —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏. –û–Ω–∏ –º–æ–≥—É—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö, –∏ —Ä–∞–∑–¥–µ–ª—è—Ç—å —Ç–∏–ø—ã –±—É–¥–µ—Ç —Å–ª–æ–∂–Ω–µ–µ, —á–µ–º —Å–ª–æ–∂–∏—Ç—å –≤ –æ–¥–∏–Ω.

–í –Ω–∞—á–∞–ª–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–µ—Ç —Ç–∞–∫–∂–µ –Ω–µ —Ö–≤–∞—Ç–∞—Ç—å –∑–Ω–∞–Ω–∏–π –æ–± –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∫–∞–∫–∏—Ö-—Ç–æ —Ç–∏–ø–æ–≤. –≠—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, —Å–µ–π—á–∞—Å –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ç–∏–ø—ã –Ω–∞ _—è–≤–Ω–æ_ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ (explicitly undefined). –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–µ –æ—Ç–≤–ª–µ–∫–∞—è—Å—å –Ω–∞ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞. (–ü–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –ø–æ—Å–ª–µ —É—Ç–æ—á–Ω–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞–¥–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å.)

<Switch options="fsharp,ts">

```fsharp
type Undefined = exn

type CustomerInfo = Undefined
type ShippingAddress = Undefined
type BillingAddress = Undefined
type OrderLine = Undefined
type BillingAmount = Undefined
```

```ts
type Undefined = unknown;

type CustomerInfo = Undefined;
type ShippingAddress = Undefined;
type BillingAddress = Undefined;
type OrderLine = Undefined;
type BillingAmount = Undefined;
```

</Switch>

–î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≤—ã–±–æ—Ä, –º—ã –º–æ–∂–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –≤ –≤–∏–¥–µ —é–Ω–∏–æ–Ω-—Ç–∏–ø–æ–≤:

<Switch options="fsharp,ts">

```fsharp
type OrderQuantity =
  | Unit of UnitQuantity
  | Kilogram of KilogramQuantity
```

```ts
type OrderQuantity = Unit | Kilogram;
```

</Switch>

### –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–π

–Æ–Ω–∏–æ–Ω- –∏ —Ä–µ–∫–æ—Ä–¥-—Ç–∏–ø—ã –∏–≥—Ä–∞—é—Ç —Ä–æ–ª—å _—Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö_ –≤ –æ–±—â–µ–º —è–∑—ã–∫–µ. –†–æ–ª—å _–≥–ª–∞–≥–æ–ª–æ–≤_ –±—É–¥—É—Ç –∏–≥—Ä–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã (function types). –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—Ü–µ—Å—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–∫–∞–∑–∞ –º—ã –±—ã –º–æ–≥–ª–∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞–∫:

<Switch options="fsharp,ts">

```fsharp
type ValidateOrder = UnvalidatedOrder -> ValidatedOrder
```

```ts
type ValidateOrder = (order: UnvalidatedOrder) => ValidatedOrder;
```

</Switch>

–ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–π, —Ç–æ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∫–æ—Ä–¥-—Ç–∏–ø, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ:

<Switch options="fsharp,ts">

```fsharp
type PlaceOrderEvents = {
  AcknowledgmentSent: AcknowledgmentSent
  OrderPlaced: OrderPlaced
  BillableOrderPlaced: BillableOrderPlaced
}

type PlaceOrder = UnvalidatedOrder -> PlaceOrderEvents
```

```ts
type PlaceOrderEvents = {
	acknowledgmentSent: AcknowledgmentSent;
	orderPlaced: OrderPlaced;
	billableOrderPlaced: BillableOrderPlaced;
};

type PlaceOrder = (order: UnvalidatedOrder) => PlaceOrderEvents;
```

</Switch>

–ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—Ö–æ–¥, —Ç–æ –º–æ–∂–Ω–æ –ø–æ—Å—Ç—É–ø–∏—Ç—å –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∫–æ—Ä–¥ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–ª—è–º–∏:

<Switch options="fsharp,ts">

```fsharp
type CalculatePrices = OrderForm -> ProductCatalog -> PricedOrder

// –ò–ª–∏:

type CalculatePricesInput = {
  OrderForm: OrderForm
  ProductCatalog: ProductCatalog
}

type CalculatePrices = CalculatePricesInput -> PricedOrder
```

```ts
type CalculatePrices = (form: OrderForm) => (catalog: ProductCatalog) => PricedOrder;

// –ò–ª–∏:

type CalculatePricesInput = {
	OrderForm: OrderForm;
	ProductCatalog: ProductCatalog;
};

type CalculatePrices = (input: CalculatePricesInput) => PricedOrder;
```

</Switch>

–í—Ç–æ—Ä–æ–π —Å–ø–æ—Å–æ–± –±–æ–ª—å—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ _—Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω—ã –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã_. –ï—Å–ª–∏ –∂–µ –æ–¥–∏–Ω –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–∫–æ—Ä–µ–µ _–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å_, —á–µ–º –ø—Ä—è–º–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç, —Ç–æ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–≤—ã–π —Å–ø–æ—Å–æ–± ‚Äî –æ–Ω –ø–æ–º–æ–∂–µ—Ç –≤ –±—É–¥—É—â–µ–º —Å ¬´—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π¬ª.

–î–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –º—ã –º–æ–∂–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–∏–ø–∞–º–∏ `Result`, `Async` –∏ —Å–≤–æ–∏–º–∏ –æ–±—ë—Ä—Ç–∫–∞–º–∏ –Ω–∞–¥ –Ω–∏–º–∏:

<Switch options="fsharp,ts">

```fsharp
type ValidationResponse<'a> = Async<Result<'a,ValidationError list>>
type ValidateOrder = UnvalidatedOrder -> ValidationResponse<ValidatedOrder>
```

```ts
// –í TypeScript –Ω–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ Result –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—à–∏–±–∫–∞–º–∏,
// –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –ø—Ä–∏–¥—ë—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.
// –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ—á—Ç–æ –≤—Ä–æ–¥–µ:
type Result<TSuccess, TFailure = Error> =
	| { ok: true; value: TSuccess }
	| { ok: false; error: TFailure };

type ValidationResponse<TResponse> = Promise<Result<TResponse, ValidationError[]>>;

type ValidateOrder = (order: UnvalidatedOrder) => ValidationResponse<ValidatedOrder>;
```

</Switch>

### –í–æ–ø—Ä–æ—Å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏

–í DDD –ø—Ä–∏–Ω—è—Ç–æ –¥–µ–ª–∏—Ç—å –≤–µ—â–∏ –Ω–∞ _¬´—Å—É—â–Ω–æ—Å—Ç–∏¬ª (entities)_ –∏ _¬´–æ–±—ä–µ–∫—Ç—ã –∑–Ω–∞—á–µ–Ω–∏—è¬ª (value objects)_. –£ –ø–µ—Ä–≤—ã—Ö –µ—Å—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å, –≤—Ç–æ—Ä—ã–µ –∂–µ ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤—ã, –µ—Å–ª–∏ —É –Ω–∏—Ö –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.

<aside>

–°–æ—Ä—è–Ω, –Ω–æ –≤–º–µ—Å—Ç–æ ¬´–æ–±—ä–µ–∫—Ç–æ–≤ –∑–Ω–∞—á–µ–Ω–∏–π¬ª —è –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª ‚Äî value objects, –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ
–∞–¥–µ–∫–≤–∞—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ —è —Ç–∞–∫ –∏ –Ω–µ –Ω–∞—à—ë–ª.

</aside>

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –º—ã –≥–æ–≤–æ—Ä–∏–º –æ–± –∏–º–µ–Ω–∞—Ö –ª—é–¥–µ–π, —Ç–æ –¥–≤–∞ _—Ä–∞–∑–Ω—ã—Ö_ —á–µ–ª–æ–≤–µ–∫–∞ –º–æ–≥—É—Ç –∏–º–µ—Ç—å _–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ_ –∏–º–µ–Ω–∞. –ò–º—è —Ç–æ–≥–¥–∞ –º–æ–∂–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Å–æ–±–æ–π value object. –í F# –¥–≤–∞ —Ä–µ–∫–æ—Ä–¥-–∑–Ω–∞—á–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏—Ö –ø–æ–ª–µ–π –æ–¥–∏–Ω–∞–∫–æ–≤—ã. –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è _—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å—é (structural identity)_:

```fsharp
let name1 = {FirstName="Alex"; LastName="Adams"}
let name2 = {FirstName="Alex"; LastName="Adams"}
printfn "%b" (name1 = name2)  // "true"
```

–ù–æ –∏–Ω–æ–≥–¥–∞ –Ω–∞–º –Ω–∞–¥–æ —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è _—Ç–µ–º–∏ –∂–µ_, –¥–∞–∂–µ –µ—Å–ª–∏ –∏—Ö _—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–µ–Ω—è–µ—Ç—Å—è_. –ù–∞–ø—Ä–∏–º–µ—Ä, —á–µ–ª–æ–≤–µ–∫, –ø–µ—Ä–µ–µ—Ö–∞–≤ –Ω–∞ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å, –≤—Å—ë –µ—â—ë –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–µ–º –∂–µ —á–µ–ª–æ–≤–µ–∫–æ–º. –¢–∞–∫–∏–µ –≤–µ—â–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è _—Å—É—â–Ω–æ—Å—Ç—è–º–∏_.

–°—É—â–Ω–æ—Å—Ç—è–º –Ω—É–∂–µ–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –æ—Ç–ª–∏—á–∞—Ç—å –æ–¥–Ω—É —Å—É—â–Ω–æ—Å—Ç–∏ –æ—Ç –¥—Ä—É–≥–æ–π. –ò–Ω–æ–≥–¥–∞ —Ç–∞–∫–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥–º–µ—Ç–Ω–∞—è –æ–±–ª–∞—Å—Ç—å (—Å–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä, –Ω–æ–º–µ—Ä —Å–æ—Ü. —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∏ —Ç. –¥.), –∏–Ω–æ–≥–¥–∞ –∏—Ö –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ (GUID, UUID).

–•—Ä–∞–Ω–∏—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —É–¥–æ–±–Ω–µ–µ ¬´–≤–Ω—É—Ç—Ä–∏¬ª —Å–∞–º–æ–π —Å—É—â–Ω–æ—Å—Ç–∏, —á–µ–º ¬´—Å–Ω–∞—Ä—É–∂–∏¬ª, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç —É–¥–æ–±–Ω–µ–µ [_–ø–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥_](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/pattern-matching).

<Switch options="fsharp,ts">

```fsharp
// ID —Å–Ω–∞—Ä—É–∂–∏:

type UnpaidInvoiceInfo = ...
type PaidInvoiceInfo = ...
type InvoiceInfo =
  | Unpaid of UnpaidInvoiceInfo
  | Paid of PaidInvoiceInfo

type InvoiceId = ...
type Invoice = {
  InvoiceId : InvoiceId
  InvoiceInfo : InvoiceInfo
}


// ID –≤–Ω—É—Ç—Ä–∏:

type UnpaidInvoice = {
	InvoiceId : InvoiceId
  // ‚Ä¶
}

type PaidInvoice = {
  InvoiceId : InvoiceId
  // ‚Ä¶
}

type Invoice =
  | Unpaid of UnpaidInvoice
  | Paid of PaidInvoice
```

```ts
// ID —Å–Ω–∞—Ä—É–∂–∏:

type UnpaidInvoiceInfo = // ...
type PaidInvoiceInfo = // ...
type InvoiceInfo = Unpaid | Paid

type InvoiceId = // ...
type Invoice = {
  invoiceId : InvoiceId
  invoiceInfo : InvoiceInfo
}


// ID –≤–Ω—É—Ç—Ä–∏:

type UnpaidInvoice = {
	invoiceId : InvoiceId
  // ‚Ä¶
}

type PaidInvoice = {
  invoiceId : InvoiceId
  // ‚Ä¶
}

type Invoice = Unpaid | Paid
```

</Switch>

<aside>

–î–ª—è –ø–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥–∞ –≤ TS –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, [ts-pattern](https://github.com/gvergnaud/ts-pattern).

</aside>

–î–ª—è value objects _–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å_ ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–∞–∫–æ–≥–æ-—Ç–æ –ø–æ–ª—è, –æ–±—ä–µ–∫—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è _–¥—Ä—É–≥–∏–º_, —Ç–æ –µ—Å—Ç—å –æ–Ω –Ω–µ –º–æ–∂–µ—Ç ¬´–ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è—Ç—å—Å—è¬ª. –°—É—â–Ω–æ—Å—Ç–∏ –º–µ–Ω—è—Ç—å—Å—è –º–æ–≥—É—Ç, –Ω–æ –Ω–µ –±—É–¥–µ–º –∏—Ö –ø—Ä–æ—Å—Ç–æ ¬´–º–µ–Ω—è—Ç—å¬ª, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º—ã –±—É–¥–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å _–∫–æ–ø–∏–∏ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏_, —Å–æ—Ö—Ä–∞–Ω—è—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–Ω–æ—Å—Ç–∏ —è–≤–Ω—ã–º–∏:

<Switch options="fsharp,ts">

```fsharp
// –°—Ä–∞–∑—É –≤–∏–¥–Ω–æ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–º–µ–Ω—è–µ—Ç —Å—É—â–Ω–æ—Å—Ç—å Person:
type UpdateName = Person -> Name -> Person
```

```ts
// –°—Ä–∞–∑—É –≤–∏–¥–Ω–æ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–º–µ–Ω—è–µ—Ç —Å—É—â–Ω–æ—Å—Ç—å Person:
type UpdateName = (person: Person) => (name: Name) => Person;
```

</Switch>

### –°–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ (–∞–≥—Ä–µ–≥–∞—Ç—ã)

–ü–æ–¥—É–º–∞–µ–º –Ω–∞–¥ —Ç–∞–∫–∏–º –≤–æ–ø—Ä–æ—Å–æ–º: –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–º–µ–Ω—è–µ—Ç –ø—É–Ω–∫—Ç –∑–∞–∫–∞–∑–∞ ‚Äî –¥–æ–ª–∂–µ–Ω –ª–∏ –ø–æ–º–µ–Ω—è—Ç—å—Å—è –≤–µ—Å—å –∑–∞–∫–∞–∑? –û—Ç–≤–µ—Ç: –¥–∞, –¥–æ–ª–∂–µ–Ω, –ø–æ —Ç—Ä—ë–º –ø—Ä–∏—á–∏–Ω–∞–º:

- —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å _–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å_ –¥–∞–Ω–Ω—ã—Ö;
- —á—Ç–æ–±—ã –Ω–µ –Ω–∞—Ä—É—à–∞—Ç—å _–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å_;
- –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–ª–∞–µ—Ç —ç—Ç–æ _–Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º_ ¬Ø\\\_(„ÉÑ)\_/¬Ø

**–ü–æ–¥ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é** –º—ã –∏–º–µ–µ–º –≤ –≤–∏–¥—É, —á—Ç–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–∂–µ –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞, –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –æ–±—â—É—é —Å—É–º–º—É –∑–∞–∫–∞–∑–∞. –ï—Å–ª–∏ —ç—Ç–æ–≥–æ –Ω–µ —Å–¥–µ–ª–∞—Ç—å, –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞–Ω—É—Ç –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º–∏.

**–ü–æ–¥ –∏–Ω–≤–∞—Ä–∏–∞—Ç–Ω–æ—Å—Ç—å—é** –º—ã –∏–º–µ–µ–º –≤ –≤–∏–¥—É, —á—Ç–æ –µ—Å–ª–∏ –≤ –∑–∞–∫–∞–∑–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä–Ω—ã–π –ø—É–Ω–∫—Ç, –Ω–∞–º –Ω–∞–¥–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤, —Ç–∞–º –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä.

**–ù–µ–∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å** –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–æ ¬´–∫–æ—Ä–Ω–µ–≤–æ–π¬ª, —Ç–æ –µ—Å—Ç—å –æ—Ç —Ç–æ–≤–∞—Ä–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –¥–æ –∑–∞–∫–∞–∑–∞, –∫–æ—Ç–æ—Ä–æ–º—É –æ–Ω –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç. –í —Ç–µ—Ä–º–∏–Ω–∞—Ö DDD —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –±—É–¥–µ—Ç –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è _—Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å—é (–∞–≥—Ä–µ–≥–∞—Ç–æ–º, aggregate)_, –∞ –∑–∞–∫–∞–∑ ‚Äî _–∫–æ—Ä–Ω–µ–º (aggregate root)_.

–ê–≥—Ä–µ–≥–∞—Ç—ã ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–µ, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –µ–¥–∏–Ω–∏—Ü—ã _—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (units of persistence)_. –ù–∞–º —Å—Ç–æ–∏—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã —Ç–∞–∫, —á—Ç–æ–±—ã –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–∞ _–ª–∏—à–Ω–∏—Ö_ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤ –∑–∞–∫–∞–∑–µ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π —Å–¥–µ–ª–∞–ª —ç—Ç–æ—Ç –∑–∞–∫–∞–∑, –∫–∞–∫ –ª—É—á—à–µ —Å–æ—Å–ª–∞—Ç—å—Å—è –Ω–∞ –Ω–µ–≥–æ: –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Ç–æ–ª—å–∫–æ –µ–≥–æ ID?

<Switch options="fsharp,ts">

```fsharp
type Order = {
  OrderId: OrderId
  Customer: Customer
  OrderLines: OrderLine list
  // ‚Ä¶
}

// –ò–ª–∏:

type Order = {
  OrderId: OrderId
  CustomerId: CustomerId
  OrderLines: OrderLine list
  // ‚Ä¶
}
```

```ts
type Order = {
	orderId: OrderId;
	customer: Customer;
	orderLines: OrderLine[];
	// ‚Ä¶
};

// –ò–ª–∏:

type Order = {
	orderId: OrderId;
	customerId: CustomerId;
	orderLines: OrderLine[];
	// ‚Ä¶
};
```

</Switch>

–í –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏–¥—ë—Ç—Å—è –º–µ–Ω—è—Ç—å –∏ –∑–∞–∫–∞–∑—ã, –≤–æ –≤—Ç–æ—Ä–æ–º ‚Äî –Ω–µ –ø—Ä–∏–¥—ë—Ç—Å—è. –í—Ç–æ—Ä–æ–π —Å–ø–æ—Å–æ–± –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ —Ç–∞—â–∏—Ç –∑–∞ —Å–æ–±–æ–π –ª–∏—à–Ω–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏–π.

## –ì–ª–∞–≤–∞ 6. –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–æ–º–µ–Ω–∞

–í —ç—Ç–æ–π –≥–ª–∞–≤–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–Ω—è—Ç–∏—è [_—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ (integrity)_](https://en.wikipedia.org/wiki/Data_integrity) –∏ [_—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å (consistency)_](https://en.wikipedia.org/wiki/Data_consistency). –ú—ã —Ö–æ—Ç–∏–º —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–º –≤–Ω—É—Ç—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –º–æ–∂–Ω–æ –¥–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –æ–Ω–∏ –ø—Ä–æ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã –∏ —á–µ—Å—Ç–Ω—ã, –∞ —Ç–∞–∫–∂–µ —á—Ç–æ —Ä–∞–∑–Ω—ã–µ —á–∞—Å—Ç–∏ –¥–æ–º–µ–Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π –∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –±—ã –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥—É.

### –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –ø—Ä–æ—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

–í –¥–æ–º–µ–Ω–µ —Ä–µ–¥–∫–æ –±—ã–≤–∞—é—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞ –∏ —Ç. –¥. –ß–∞—â–µ –≤—Å–µ–≥–æ —É –±–∏–∑–Ω–µ—Å–∞ –µ—Å—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –≤–∞–ª–∏–¥–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π. –ú—ã —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –¥–∏–∞–ø–∞–∑–æ–Ω—ã —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±—ã–ª–æ –ø—Ä–æ—Å—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å.

–í F# –¥–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–º–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. –í–Ω–∞—á–∞–ª–µ –º—ã –¥–µ–ª–∞–µ–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–∏–≤–∞—Ç–Ω—ã–º, –∞ –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–ª—è–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ:

```fsharp
type UnitQuantity = private UnitQuantity of int

module UnitQuantity =
  let create qty =
    if qty < 1 then
      Error "UnitQuantity can not be negative"
    else if qty > 1000 then
      Error "UnitQuantity can not be more than 1000"
    else
      Ok (UnitQuantity qty)

	// –ß—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏—Ç—å:
	let value (UnitQuantity qty) = qty

// –ê –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫:
let unitQtyResult = UnitQuantity.create 1
```

–í TypeScript –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ —Å–ª–æ–∂–Ω–µ–µ, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∏–ø—ã —Ä—É–∫–∞–º–∏. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º—ã —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∞–±—Ä–∏–∫–∏:

```ts
type UnitQuantity = number;

function createQuantity(raw: number): UnitQuantity {
	if (raw < 1) throw new Error('UnitQuantity can not be negative');
	if (raw > 1000) throw new Error('UnitQuantity can not be more than 1000');
	return raw as UnitQuantity;
}
```

### –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è

–í F# –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è, —á—Ç–æ–±—ã —Ç–µ–≥–∞—Ç—å —Ç–∏–ø—ã:

```fsharp
[<Measure>]
type kg

[<Measure>]
type m

type KilogramQuantity = KilogramQuantity of decimal<kg>
```

–í TypeScript —Ç–æ–∂–µ –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –Ω–∞—É—á–∏—Ç—å—Å—è [—Ç–µ–≥–∞—Ç—å —Ç–∏–ø—ã](https://medium.com/@KevinBGreene/surviving-the-typescript-ecosystem-branding-and-type-tagging-6cf6e516523d), –Ω–æ –æ–ø—è—Ç—å –∂–µ —ç—Ç–æ –±—É–¥–µ—Ç –Ω–µ —Ç–∞–∫ –Ω–∞–¥—ë–∂–Ω–æ –∏ —É–¥–æ–±–Ω–æ.

### –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É —Ç–∏–ø–æ–≤

–û–¥–Ω–æ –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–º–µ–Ω–∞ –∑–≤—É—á–∏—Ç –∫–∞–∫:

> –°–¥–µ–ª–∞–π—Ç–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º–∏, –Ω–µ–ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º—ã–º–∏

–¢–æ –µ—Å—Ç—å –ø–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –º–æ–¥–µ–ª—å —Ç–∏–ø–æ–≤ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–æ _–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å_ –≤ —ç—Ç–∏—Ö —Ç–∏–ø–∞—Ö.

–ü—Ä–æ—â–µ –≤—Å–µ–≥–æ –ø–æ–Ω—è—Ç—å —ç—Ç–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ. –î–æ–ø—É—Å—Ç–∏–º, –º—ã —Ö–æ—Ç–∏–º –Ω–∞–ø–∏—Å–∞—Ç—å –º–æ–¥—É–ª—å –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –ø–æ—á—Ç—É. –£ –Ω–∞—Å –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ—á—Ç:

- –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ ‚Äî –Ω–∞ —Ç–∞–∫–∏–µ –∞–¥—Ä–µ—Å–∞ —É–∂–µ –≤—ã—Å—ã–ª–∞–ª–∏ —Å—Å—ã–ª–∫—É –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–µ—Ä–µ—à–ª–∏ –ø–æ –Ω–µ–π;
- –∏ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ.

–ù–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –º—ã —Ö–æ—Ç–∏–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ –Ω–µ —Ö–æ—Ç–∏–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ—á—Ç—ã. –ò –Ω–∞–æ–±–æ—Ä–æ—Ç ‚Äî –º—ã –Ω–µ —Ö–æ—Ç–∏–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞, –∞ —Ç–æ–ª—å–∫–æ ‚Äî —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ—á—Ç—ã.

–û–¥–Ω–∏–º –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä–µ—à–µ–Ω–∏—è –º–æ–≥ –±—ã –±—ã—Ç—å —Ç–∞–∫–æ–π —Ç–∏–ø:

<Switch options="fsharp,ts">

```fsharp
type CustomerEmail = {
  EmailAddress: EmailAddress
  IsVerified: bool
}
```

```ts
type CustomerEmail = {
	emailAddress: EmailAddress;
	isVerified: boolean;
};
```

</Switch>

–ù–æ —Ñ–ª–∞–≥ `IsVerified` ‚Äî —ç—Ç–æ –æ—á–µ–Ω—å –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –ì–ª–∞–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è –Ω–µ—è—Å–Ω–æ, –∫–æ–≥–¥–∞ –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á—ë–Ω, –∞ –∫–æ–≥–¥–∞ ‚Äî –≤—ã–∫–ª—é—á–µ–Ω. –ù–æ —Ç–∞–∫–∂–µ –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –µ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –±—É–¥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ä–∞–Ω—Ç–∞–π–º–µ, –∞ –∑–Ω–∞—á–∏—Ç, –∏—Ö –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å, –∑–∞–±—ã—Ç—å, –Ω–µ –∑–∞–º–µ—Ç–∏—Ç—å –∏ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≤–µ–¥—ë—Ç –¥–∞–Ω–Ω—ã–µ –≤ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ª—É—á—à–µ –æ–ø–∏—Å–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä—è–º–æ –≤ —Ç–∏–ø–µ:

<Switch options="fsharp,ts">

```fsharp
type VerifiedEmailAddress = private VerifiedEmailAddress of EmailAddress
type CustomerEmail =
  | Unverified of EmailAddress
  | Verified of VerifiedEmailAddress
```

```ts
type EmailAddress = string;
type VerifiedEmailAddress = EmailAddress;
type CustomerEmail = EmailAddress | VerifiedEmailAddress;

function createCustomerEmail(raw: string): CustomerEmail {
	// ...–í–∞–ª–∏–¥–∞—Ü–∏—è, –ø—Ä–æ–≤–µ—Ä–∫–∏, –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –∫ –Ω—É–∂–Ω–æ–º—É –≤–∏–¥—É.
	return email as EmailAddress;
}
```

</Switch>

–¢–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ, —á—Ç–æ ¬´–ø—Ä–æ—Å—Ç–æ —Ç–∞–∫¬ª —Å–æ–∑–¥–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–π –∞–¥—Ä–µ—Å –ø–æ—á—Ç—ã ‚Äî –Ω–µ–ª—å–∑—è. –ï—Å–ª–∏ –º—ã —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å, —Ç–æ –æ–Ω –±—É–¥–µ—Ç _–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é_ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–π. –¢–∞–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤ –º–æ–∂–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å —á–∞—Å—Ç—å —Ä–∞–Ω—Ç–∞–π–º —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤. (–ù—É... –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –≤ F#.)

### –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å

_–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å_ ‚Äî —ç—Ç–æ –±–æ–ª—å—à–µ –±–∏–∑–Ω–µ—Å–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω, —á–µ–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–∫ –∏ –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω—É–∂–¥ –±–∏–∑–Ω–µ—Å–∞.

**–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –∞–≥—Ä–µ–≥–∞—Ç–∞** –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞. (–ö–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ —Å –æ–±—â–µ–π —Å—É–º–º–æ–π ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –µ—ë –∏–∑ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤.) –ï—Å–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞–¥–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å, —Ç–æ —Ç–æ–≥–¥–∞, –∫–æ–Ω–µ—á–Ω–æ, –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–ª–µ–¥—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã.

–ù–∞ –ø—Ä–∏–º–µ—Ä–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—É–Ω–∫—Ç–∞ –≤ –∑–∞–∫–∞–∑–µ —ç—Ç–æ –º–æ–≥–ª–æ –±—ã –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

<Switch options="fsharp,ts">

```fsharp
/// –ü–µ—Ä–µ–¥–∞—ë–º 3 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:
/// * –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∑–∞–∫–∞–∑;
/// * ID –ø—É–Ω–∫—Ç–∞ –∑–∞–∫–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–¥–æ –ø–æ–º–µ–Ω—è—Ç—å;
/// * –Ω–æ–≤–∞—è —Ü–µ–Ω–∞.
let changeOrderLinePrice order orderLineId newPrice =

  // –ù–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –ø—É–Ω–∫—Ç —Å—Ä–µ–¥–∏ order.OrderLines —Å –ø–æ–º–æ—â—å—é orderLineId:
  let orderLine = order.OrderLines |> findOrderLine orderLineId

  // –°–¥–µ–ª–∞—Ç—å –∫–æ–ø–∏—é OrderLine —Å –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–π —Ü–µ–Ω–æ–π:
  let newOrderLine = {orderLine with Price = newPrice}

  // –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –ø—É–Ω–∫—Ç–æ–≤, –∑–∞–º–µ–Ω–∏–≤ —Å—Ç–∞—Ä—ã–π –ø—É–Ω–∫—Ç –Ω–æ–≤—ã–º
  let newOrderLines =
    order.OrderLines |> replaceOrderLine orderLineId newOrderLine

  // –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å AmountToBill
  let newAmountToBill = newOrderLines |> List.sumBy (fun line -> line.Price)

  // –°–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é –∑–∞–∫–∞–∑–∞ —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  let newOrder = {
      order with
        OrderLines = newOrderLines
        AmountToBill = newAmountToBill
      }

  // –í–µ—Ä–Ω—É—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑:
  newOrder
```

```ts
/// –ü–µ—Ä–µ–¥–∞—ë–º 3 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:
/// * –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∑–∞–∫–∞–∑;
/// * ID –ø—É–Ω–∫—Ç–∞ –∑–∞–∫–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–¥–æ –ø–æ–º–µ–Ω—è—Ç—å;
/// * –Ω–æ–≤–∞—è —Ü–µ–Ω–∞.
function changeOrderLinePrice(order: Order, orderLineId: OrderLineId, newPrice: Price): Order {
	// –ù–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –ø—É–Ω–∫—Ç —Å—Ä–µ–¥–∏ order.OrderLines —Å –ø–æ–º–æ—â—å—é orderLineId:
	const orderLine = findOrderLine(order.orderLines, orderLineId);

	// –°–¥–µ–ª–∞—Ç—å –∫–æ–ø–∏—é OrderLine —Å –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–π —Ü–µ–Ω–æ–π:
	const newOrderLine = { ...orderLine, price: newPrice };

	// –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –ø—É–Ω–∫—Ç–æ–≤, –∑–∞–º–µ–Ω–∏–≤ —Å—Ç–∞—Ä—ã–π –ø—É–Ω–∫—Ç –Ω–æ–≤—ã–º
	const newOrderLines = replaceOrderLine(order.orderLines, orderLineId, newOrderLine);

	// –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å AmountToBill
	const newAmountToBill = newOrderLines.reduce((total, line) => total + line.price, 0);

	// –°–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é –∑–∞–∫–∞–∑–∞ —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
	const newOrder = {
		...order,
		orderLines: newOrderLines,
		amountToBill: newAmountToBill
	};

	// –í–µ—Ä–Ω—É—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑:
	return newOrder;
}
```

</Switch>

–ó–¥–µ—Å—å –∑–∞–∫–∞–∑ ‚Äî —ç—Ç–æ _–∞–≥—Ä–µ–≥–∞—Ç_. –ú—ã –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ —Å—á–∏—Ç–∞–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∑–∞–∫–∞–∑–∞ (–∞–≥—Ä–µ–≥–∞—Ç–∞), –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–æ–ª—å–∫–æ –µ–º—É –∏–∑–≤–µ—Å—Ç–Ω–æ, _–∫–∞–∫_ —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –æ–±—â—É—é —Ü–µ–Ω—É –∏–∑ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤. –ï—Å–ª–∏ –º—ã –±—É–¥–µ–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ, —Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∑–∞–∫–∞–∑ –∏ –ø—É–Ω–∫—Ç—ã —Å–ø–∏—Å–∫–∞ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

**–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏** –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–ª–æ–∂–Ω–µ–µ, –Ω–æ —ç—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –Ω—É–∂–Ω–æ. –í –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ —Å–ª—É—á–∞–µ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å [_–∫–æ–Ω–µ—á–Ω—É—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å (eventual consistency)_](https://en.wikipedia.org/wiki/Eventual_consistency) –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è.

–ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–µ—Ä—è–µ—Ç—Å—è, —Ç–æ –µ—Å—Ç—å —Ç—Ä–∏ —Å—Ç—É–ª–∞:

- –Ω–µ –¥–µ–ª–∞—Ç—å –Ω–∏—á–µ–≥–æ, —ç—Ç–æ –º–æ–∂–µ—Ç —Å—Ç–æ–∏—Ç—å –¥–µ–Ω–µ–≥;
- –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –¥–æ—à–ª–æ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ –∑–∞–Ω–æ–≤–æ;
- ¬´–æ—Ç–∫–∞—Ç–∏—Ç—å¬ª –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è.

–ï—Å–ª–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ, —Ç–æ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Å—Ç–æ—Ä–æ–Ω—É [2-—Ñ–∞–∑–Ω–æ–≥–æ –∫–æ–º–∏—Ç–∞ (2 Phase Commit)](https://en.wikipedia.org/wiki/Two-phase_commit_protocol) –∏ –ø—Ä–æ—á–∏—Ö –∑–∞–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–µ—â–µ–π.

**–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –∞–≥—Ä–µ–≥–∞—Ç–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π. –û–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ ‚Äî –∑–∞ –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –æ–¥–∏–Ω –∞–≥—Ä–µ–≥–∞—Ç, –Ω–æ –æ–±–µ—Å–ø–µ—á—å—Ç–µ –∫–æ–Ω–µ—á–Ω—É—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∞–≥—Ä–µ–≥–∞—Ç–∞–º–∏.

–ò–Ω–æ–≥–¥–∞, –ø—Ä–∞–≤–¥–∞, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–≤–∞ –∞–≥—Ä–µ–≥–∞—Ç–∞ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏ —Å –æ–¥–Ω–æ–≥–æ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–∞ –¥—Ä—É–≥–æ–π. –ù–æ —á–∞—â–µ –≤—Å–µ–≥–æ —ç—Ç–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∏–∑–∞–π–Ω–∏—Ç—å, —á—Ç–æ–±—ã –∏–∑:

```
Start transaction
  Add X amount to accountA
  Remove X amount from accountB
  Commit transaction
```

‚Ä¶–ü–æ–ª—É—á–∏–ª–∞—Å—å –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—ã —Ä–∞–∑–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã —É–∂–µ –Ω–µ –±—ã–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:

<Switch options="fsharp,ts">

```fsharp
type MoneyTransfer = {
  Id: MoneyTransferId
  ToAccount: AccountId
  FromAccount: AccountId
  Amount: Money
}
```

```ts
type MoneyTransfer = {
	id: MoneyTransferId;
	toAccount: AccountId;
	fromAccount: AccountId;
	amount: Money;
};
```

</Switch>

## –ì–ª–∞–≤–∞ 7. –ú–æ–¥–µ–ª–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã –∫–∞–∫ –ø–∞–π–ø–ª–∞–π–Ω—ã

–í —ç—Ç–æ–π –≥–ª–∞–≤–µ –º—ã –ø–æ–ø—Ä–æ–±—É–µ–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Ç–∏–ø–æ–≤ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–∏—ë–º–∞ –∑–∞–∫–∞–∑–æ–≤. –°–µ–π—á–∞—Å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —à–∞–≥–æ–≤:

- –í–∞–ª–∏–¥–∞—Ü–∏—è
- –û—Ü–µ–Ω–∫–∞
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—ã—Ö–æ–¥–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

–ú—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º —ç—Ç–∏ —à–∞–≥–∏ –∫–∞–∫ —á–∞—Å—Ç–∏ –±–æ–ª—å—à–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ ‚Äî –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ —Ü–µ–ª–æ–º. –ö–∞–∂–¥—ã–π —à–∞–≥ –±—É–¥–µ—Ç –∫–∞–∫-—Ç–æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ú—ã –ø–æ—Å—Ç–∞—Ä–∞–µ–º—Å—è —Å–¥–µ–ª–∞—Ç—å –∫–∞–∂–¥—ã–π —à–∞–≥ –±–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (stateless).

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

–í—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å _–¥–æ–º–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç_. –ú—ã –ø–æ—Å—á–∏—Ç–∞–µ–º, —á—Ç–æ —Ç–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –º—ã –¥–æ—Å—Ç–∞—ë–º –∏–∑ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö DTO –∏ –±—É–¥–µ–º –ø—Ä–æ—Å—Ç–æ –¥–µ—Ä–∂–∞—Ç—å —ç—Ç–æ –≤ —É–º–µ.

<Switch options="fsharp,ts">

```fsharp
type UnvalidatedOrder = {
  OrderId: string
  CustomerInfo: UnvalidatedCustomerInfo
  ShippingAddress: UnvalidatedAddress
  // ‚Ä¶
}
```

```ts
type UnvalidatedOrder = {
	orderId: string;
	customerInfo: UnvalidatedCustomerInfo;
	shippingAddress: UnvalidatedAddress;
	// ‚Ä¶
};
```

</Switch>

–ù–æ –º—ã –ø–æ–º–Ω–∏–º, —á—Ç–æ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–µ —Å–∞–º –æ–±—ä–µ–∫—Ç, –∞ –∫–æ–º–∞–Ω–¥–∞. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤ –∫–æ–º–∞–Ω–¥—ã –º—ã —á–∞—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–∏–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Ç–∞–π–º—à—Ç–∞–º–ø–∞. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –º—ã –º–æ–∂–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–æ —Ç–∞–∫:

```fsharp
type PlaceOrder = {
  OrderForm: UnvalidatedOrder
  Timestamp: DateTime
  UserId: string
  // ‚Ä¶
}
```

–ö–æ–º–∞–Ω–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ, –ø–æ—ç—Ç–æ–º—É —Å–¥–µ–ª–∞–µ–º –æ–±—â–∏–π [–¥–∂–µ–Ω–µ—Ä–∏–∫-—Ç–∏–ø](https://www.typescriptlang.org/docs/handbook/2/generics.html) –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

<Switch options="fsharp,ts">

```fsharp
type Command<'data> = {
  Data: 'data
  Timestamp: DateTime
  UserId: string
  // ‚Ä¶
}
```

```ts
type Command<TPayload> = {
	Data: TPayload;
	Timestamp: DateTime;
	UserId: string;
	// ‚Ä¶
};
```

</Switch>

–ê —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º—ã —Å–º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å, –ø–µ—Ä–µ–¥–∞–≤ —Ç–∏–ø-–ø–∞—Ä–∞–º–µ—Ç—Ä:

<Switch options="fsharp,ts">

```fsharp
type PlaceOrder = Command<UnvalidatedOrder>
```

```ts
type PlaceOrder = Command<UnvalidatedOrder>;
```

</Switch>

### –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –∫–∞–∫ –Ω–∞–±–æ—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π

–ò–∑ –∏–Ω—Ç–µ—Ä–≤—å—é —Å —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏ –Ω–∞–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ ¬´–ó–∞–∫–∞–∑¬ª (Order) ‚Äî —ç—Ç–æ –Ω–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç, –∞ —Å–∫–æ—Ä–µ–µ –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏, —Ç–æ –µ—Å—Ç—å –ø—Ä–µ–±—ã–≤–∞—é—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö.

–°–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —ç—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ–∂–Ω–æ —Ä–∞–∑–Ω—ã–º–∏ –ø—É—Ç—è–º–∏. –ù–∞–∏–≤–Ω—ã–π –ø—É—Ç—å ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞—Ç—å –∫—É—á—É —Ñ–ª–∞–≥–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π:

<Switch options="fsharp,ts">

```fsharp
type Order = {
  OrderId: OrderId
  // ‚Ä¶
  IsValidated: bool
  IsPriced: bool
}
```

```ts
type Order = {
	orderId: OrderId;
	// ‚Ä¶
	isValidated: boolean;
	isPriced: boolean;
};
```

</Switch>

–ù–æ —É –Ω–µ–≥–æ –∫—É—á–∞ –º–∏–Ω—É—Å–æ–≤:

- —Ç–∞–∫–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ—è–≤–Ω—ã–µ, –ø–æ—ç—Ç–æ–º—É –ø–æ—Ç—Ä–µ–±—É—é—Ç –∫—É—á—É –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ;
- –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω—É–∂–Ω—ã –¥—Ä—É–≥–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏—è–º, –Ω–∞–º –Ω–µ –∑–∞ —á–µ–º —Ç–∞—â–∏—Ç—å –≤—Å—ë –≤—Å—é–¥—É;
- –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∫ –∫–∞–∫–∏–º —Ñ–ª–∞–≥–∞–º –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç, –∏ –∫–æ–≥–¥–∞ –æ–Ω–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è.

–î—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

<Switch options="fsharp,ts">

```fsharp
type Order =
  | Unvalidated of UnvalidatedOrder
  | Validated of ValidatedOrder
  | Priced of PricedOrder
  // ‚Ä¶
```

```ts
type Order = Unvalidated | Validated | Priced;
```

</Switch>

–ü–ª—é—Å —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –≤ —Ç–æ–º, —á—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë –æ–¥–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–µ–∑ –æ—Å–æ–±—ã—Ö —É—Å–∏–ª–∏–π. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –≤ —é–Ω–∏–æ–Ω.

–í–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Ç–∏–ø `Order` –æ—Ç—Ä–∞–∂–∞–µ—Ç –∑–∞–∫–∞–∑ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –µ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞, –∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã ‚Äî –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö. –¢–∏–ø `Order` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏.

### –ê–≤—Ç–æ–º–∞—Ç—ã (State Machines)

–Æ–Ω–∏–æ–Ω –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –ø–æ—Ö–æ–∂ –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç—ã ‚Äî –º–æ–¥–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏. –ê–≤—Ç–æ–º–∞—Ç–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≤–µ—â—å —Ö–æ—Ä–æ—à–∞—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–æ –ø–æ–±—É–∂–¥–∞–µ—Ç:

- _–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤–∞–ª–∏–¥–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã_ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏–π (–∫—É–¥–∞ –∏–∑ —ç—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–π—Ç–∏ –º–æ–∂–Ω–æ, –∞ –∫—É–¥–∞ –Ω–µ–ª—å–∑—è);
- _–∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è_ –∑–∞—Ä–∞–Ω–µ–µ;
- _–ø—Ä–æ–¥—É–º–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è_, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ;
- _–ø–æ–¥—É–º–∞—Ç—å –æ–± –æ—à–∏–±–∫–∞—Ö_.

<aside>

–û –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ [—è —Ç–æ–∂–µ –∫–æ–≥–¥–∞-—Ç–æ –ø–∏—Å–∞–ª](/blog/fsm-to-the-rescue/) üôÉ

</aside>

### –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–≥–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å –ø–æ–º–æ—â—å—é —Ç–∏–ø–æ–≤

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –æ–ø–∏—à–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é. –ú—ã –ø–æ–º–Ω–∏–º, —á—Ç–æ –æ–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–∫–∞–∑, –∞ —Ç–∞–∫–∂–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –¥–≤–µ ¬´–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏¬ª. –≠—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º—ã —Ç–æ–∂–µ –º–æ–∂–µ–º —Å–ø–µ—Ä–≤–∞ –æ–ø–∏—Å–∞—Ç—å —Ç–∏–ø–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–Ω—É—Ç ¬´–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º¬ª –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∑–∂–µ. –¢–æ–≥–¥–∞ –ø–æ–ª—É—á–∏—Ç—Å—è –Ω–µ—á—Ç–æ –≤—Ä–æ–¥–µ:

<Switch options="fsharp,ts">

```fsharp
type CheckProductCodeExists = ProductCode -> bool

type CheckedAddress = CheckedAddress of UnvalidatedAddress
type AddressValidationError = AddressValidationError of string
type CheckAddressExists = UnvalidatedAddress -> Result<CheckedAddress,AddressValidationError>
```

```ts
type CheckProductCodeExists = (code: ProductCode) => boolean;

type CheckedAddress = Address;
type AddressValidationError = string;

type CheckAddressExists = (
	address: UnvalidatedAddress
) => Result<CheckedAddress, AddressValidationError>;
```

</Switch>

–í–µ—Å—å —à–∞–≥ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–æ–≥–¥–∞ –º—ã –æ–ø–∏—à–µ–º, –∫–∞–∫ —Ç–∞–∫—É—é —Å–∏–≥–Ω–∞—Ç—É—Ä—É:

<Switch options="fsharp,ts">

```fsharp
type ValidateOrder =
  CheckProductCodeExists    // dependency
    -> CheckAddressExists   // dependency
    -> UnvalidatedOrder     // input
    -> Result<ValidatedOrder,ValidationError>  // output
```

```ts
type ValidateOrder = (
	codeChecker: CheckProductCodeExists // dependency
) => (
	addressChecker: CheckAddressExists // dependency
) => (
	order: UnvalidatedOrder // input
) => Result<ValidatedOrder, ValidationError>; // output
```

</Switch>

<aside>

–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –±—É–¥–µ—Ç –≤–Ω—É—Ç—Ä–∏ `Result`, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –æ–¥–Ω–æ–π –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –±—ã–ª —Ç–∞–∫–æ–π –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø. `Result` ¬´–∑–∞—Ä–∞–∂–∞–µ—Ç¬ª –≤—Å—ë –≤–æ–∫—Ä—É–≥, –∫–∞–∫ `async`.

</aside>

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ–º _–≤ –Ω–∞—á–∞–ª–µ_, –ø–µ—Ä–µ–¥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º ‚Äî —ç—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –≤ –±—É–¥—É—â–µ–º. –≠—Ç–æ –±—É–¥–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–æ–≥–æ–º –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

<aside>

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≤ –§–ü –Ω–∏–∫–∞–∫–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –±—ã—Ç—å –Ω–µ –º–æ–∂–µ—Ç, –æ–± —ç—Ç–æ–º —É —Å–µ–±—è –≤ –±–ª–æ–≥–µ [–ø–∏—Å–∞–ª –ú–∞—Ä–∫ –ó–∏–º–∞–Ω–Ω](https://blog.ploeh.dk/2017/02/02/dependency-rejection/). –ù–æ –∞–≤—Ç–æ—Ä –≤ –∫–Ω–∏–∂–∫–µ —á–∞—Å—Ç–æ —É–ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç —ç—Ç–æ—Ç —Ç–µ—Ä–º–∏–Ω –≤ —Å–∫–æ–±–∫–∞—Ö, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–∞—Ä–∞–ª–ª–µ–ª–∏ –∏ –≤—ã—Å—Ç—Ä–æ–∏—Ç—å –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏.

</aside>

–û–ø–∏—Å–∞–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —à–∞–≥–æ–≤ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é –≤–∞–º –ø—Ä–æ—á–µ—Å—Ç—å –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ, –∑–¥–µ—Å—å –∂–µ –º—ã –ø–µ—Ä–µ–π–¥—ë–º —Å—Ä–∞–∑—É –∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º —Å–æ–±—ã—Ç–∏—è–º :‚Äì)

–ù–∞–º –Ω—É–∂–Ω—ã —Å–æ–±—ã—Ç–∏—è `OrderPlaced` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ `BillableOrderPlaced` –¥–ª—è –±–∏–ª–ª–∏–Ω–≥–∞. –î–ª—è –ø–µ—Ä–≤–æ–≥–æ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª–∏–∞—Å –Ω–∞–¥ —É–∂–µ –∏–º–µ—é—â–∏–º—Å—è —Ç–∏–ø–æ–º, –∞ –≤—Ç–æ—Ä–æ–π —Å–æ–∑–¥–∞–¥–∏–º —Å –Ω—É–ª—è:

<Switch options="fsharp,ts">

```fsharp
type OrderPlaced = PricedOrder
type BillableOrderPlaced = {
  OrderId: OrderId
  BillingAddress: Address
  AmountToBill: BillingAmount
}
```

```ts
type OrderPlaced = PricedOrder;
type BillableOrderPlaced = {
	orderId: OrderId;
	billingAddress: Address;
	amountToBill: BillingAmount;
};
```

</Switch>

–í–æ–∑–º–æ–∂–Ω–æ, –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∫–∞–∫–∏—Ö-—Ç–æ –µ—â—ë —Å–æ–±—ã—Ç–∏–π, –ø–æ—ç—Ç–æ–º—É –ø—É—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç _—Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π_, —Ç–∏–ø–æ–º –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç:

<Switch options="fsharp,ts">

```fsharp
type PlaceOrderEvent =
  | OrderPlaced of OrderPlaced
  | BillableOrderPlaced of BillableOrderPlaced
  | AcknowledgmentSent  of OrderAcknowledgmentSent

type CreateEvents = PricedOrder -> PlaceOrderEvent list
```

```ts
type PlaceOrderEvent = OrderPlaced | BillableOrderPlaced | AcknowledgmentSent;

type CreateEvents = (order: PricedOrder) => PlaceOrderEvent[];
```

</Switch>

–¢–∞–∫ –º—ã —Å–¥–µ–ª–∞–µ–º –∫–æ–¥ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–º, –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –Ω–∞–º –Ω–µ –ø—Ä–∏–¥—ë—Ç—Å—è –º–µ–Ω—è—Ç—å –≤–µ—Å—å –∫–æ–¥ –ø—Ä–æ—Ü–µ—Å—Å–∞.

### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã

–ß–∞—Å—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —É –Ω–∞—Å –µ—Å—Ç—å –≤—ã–∑–æ–≤ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, —ç—Ç–æ —Ç–æ–∂–µ —Å—Ç–æ–∏—Ç –æ–±–æ–∑–Ω–∞—á–∏—Ç—å –≤ —Ç–∏–ø–∞—Ö:

<Switch options="fsharp,ts">

```fsharp
type AsyncResult<'success,'failure> = Async<Result<'success,'failure>>
type CheckAddressExists =
  UnvalidatedAddress -> AsyncResult<CheckedAddress,AddressValidationError>
```

```ts
type AsyncResult<TSuccess, TFailure> = Promise<Result<TSuccess, TFailure>>;
type CheckAddressExists = (
	address: UnvalidatedAddress
) => AsyncResult<CheckedAddress, AddressValidationError>;
```

</Switch>

`Async`, –∫–∞–∫ –∏ `Result`, –∑–∞—Ä–∞–∂–∞–µ—Ç —Ç–æ, –∫ —á–µ–º—É –∫–∞—Å–∞–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É —Ç–∏–ø –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞ –Ω–∞–º —Ç–æ–∂–µ –ø—Ä–∏–¥—ë—Ç—Å—è –ø–æ–º–µ–Ω—è—Ç—å:

<Switch options="fsharp,ts">

```fsharp
type ValidateOrder =
  CheckProductCodeExists    // dependency
    -> CheckAddressExists   // AsyncResult dependency
    -> UnvalidatedOrder     // input
    -> AsyncResult<ValidatedOrder,ValidationError list>  // output
```

```ts
type ValidateOrder = (
	codeChecker: CheckProductCodeExists // dependency
) => (
	addressChecker: CheckAddressExists // AsyncResult dependency
) => (
	order: UnvalidatedOrder // input
) => AsyncResult<ValidatedOrder, ValidationError[]>; // output
```

</Switch>

–¢–µ–ø–µ—Ä—å –º—ã –≤–∏–¥–∏–º, —á—Ç–æ —à–∞–≥ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–µ —Ç–æ–ª—å–∫–æ –º–æ–∂–µ—Ç –æ—Ç–¥–∞—Ç—å –æ—à–∏–±–∫—É, –Ω–æ –µ—â—ë –∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ú—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –∑–Ω–∞–Ω–∏–µ –ø—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ —Ä–∞–±–æ—Ç–µ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏: –º—ã –º–æ–∂–µ–º —Ä–µ—à–∏—Ç—å, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –º—ã –¥–æ–≤–µ—Ä—è–µ–º —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö, –∏–ª–∏ –Ω–∞–º —Å—Ç–æ–∏—Ç –Ω–∞–ø–∏—Å–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å –Ω—É–ª—è.

–ú–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –≤–æ–ø—Ä–æ—Å, –∞ –Ω–∞–¥–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ —Ç–∏–ø–∞—Ö? –ü—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –Ω–µ—Ç, –Ω–æ –∞–≤—Ç–æ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–∞–∫–∏–º –ø—Ä–∞–≤–∏–ª–∞–º:

- –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –º—ã –±—É–¥–µ–º —Å–∫—Ä—ã–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏;
- –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Äî –¥–µ—Ä–∂–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —è–≤–Ω—ã–º–∏.

–≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∫–∞–∂–¥—ã–π —à–∞–≥ _–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ_ —Ç—Ä–µ–±—É–µ—Ç –¥–ª—è —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç—ã –∏ —á—Ç–æ –æ–Ω _–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ_ –≤–µ—Ä–Ω—ë—Ç.

## –í –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç—è—Ö

–í —ç—Ç–æ—Ç —Ä–∞–∑ –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–ª–∏ –æ —Ç–æ–º, –∫–∞–∫ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–ª–æ—É –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ, –≤ —á—ë–º –æ—Ç–ª–∏—á–∏–µ –æ—Ç –û–û–ü, –∫–∞–∫ —Ç–∏–ø—ã –º–æ–≥—É—Ç –ø–æ–º–æ–≥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç—Ä–∞–∂–∞—Ç—å –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. –í [—Å–ª–µ–¥—É—é—â–µ–π —á–∞—Å—Ç–∏](/blog/domain-modelling-made-functional-3) –º—ã –ø—Ä–æ–±–µ–∂–∏–º –ø–æ —à–∞–≥–∞–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏, –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π, —á–∞—Å—Ç–∏—á–Ω—ã–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –∏, —É—Ö, –º–æ–Ω–∞–¥–∞–º–∏.

## –°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã

- [Domain Modelling Made Functional. Scott Wlaschin](https://pragprog.com/titles/swdddf/domain-modeling-made-functional/)
- [F# Language Guide](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/)

### –î—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞

- [–ß–∞—Å—Ç—å 1, –ø–æ–Ω—è—Ç–∏–µ –¥–æ–º–µ–Ω–∞](/blog/domain-modelling-made-functional)
- [–ß–∞—Å—Ç—å 3, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏](/blog/domain-modelling-made-functional-3)

### –í–∏–¥—ã –∏ —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤

- [Algebraic Data Type](https://en.wikipedia.org/wiki/Algebraic_data_type)
- [Records, F#](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/records)
- [Discriminated Unions, F#](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/discriminated-unions)
- [Discriminated Unions, TypeScript](https://www.typescriptlang.org/docs/handbook/unions-and-intersections.html#discriminating-unions)
- [Type Aliases, TypeScript](https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-aliases)
- [Type Abbreviations, F#](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/type-abbreviations)
- [Generics, F#](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/generics/)
- [Generics, TypeScript](https://www.typescriptlang.org/docs/handbook/2/generics.html)

### –¢–µ—Ö–Ω–∏–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–æ—Å—Ç—ã–ª–∏ –¥–ª—è TypeScript

- [Pattern Matching, F#](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/pattern-matching)
- [2 Phase Commit Protocol](https://en.wikipedia.org/wiki/Two-phase_commit_protocol)
- [Dependency Rejection](https://blog.ploeh.dk/2017/02/02/dependency-rejection/)
- [Branding and Type-Tagging](https://medium.com/@KevinBGreene/surviving-the-typescript-ecosystem-branding-and-type-tagging-6cf6e516523d)
- [ts-brand](https://github.com/kourge/ts-brand)
- [ts-pattern](https://github.com/gvergnaud/ts-pattern)

### –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è –∏–∑ –í–∏–∫–∏–ø–µ–¥–∏–∏

- [Data Integrity](https://en.wikipedia.org/wiki/Data_integrity)
- [Data Consistency](https://en.wikipedia.org/wiki/Data_consistency)
- [Eventual Consistency](https://en.wikipedia.org/wiki/Eventual_consistency)

### –ö–æ–µ-—á—Ç–æ –∏–∑ –º–æ–µ–≥–æ –±–ª–æ–≥–∞ –ø–æ —Ç–µ–º–µ

- [–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ](/blog/clean-architecture-on-frontend/)
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω–µ—á–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞](/blog/fsm-to-the-rescue/)
- [Dependency Injection —Å TypeScript –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ](/blog/di-ts-in-practice/)
- [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö](/blog/error-handling-async-await/)
